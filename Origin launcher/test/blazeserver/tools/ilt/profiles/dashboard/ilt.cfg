# This file is a one stop shop for all things ILT.
# Both server and client deployement configurations
# are completely defined by values specified herein.
#
# iltctrl.sh uses values defined below to execute all
# commands and to generate other config files needed
# for deploying blaze server and stress clients.
#
# bash$ iltctrl.sh profiles/<profilename> genserverconfig -->
#   bin/server_<$deployEnv>_<$deployPlat>.cfg
#
# bash$ iltctrl.sh profiles/<profilename> genclientconfig -->
#   tools/ilt/bin/clientdeploy.cfg

#
# ILT configuration
#
iltProfile=fifa_profile # performance definition file used by health and report gen
iltReportDir=~/iltreport # absolute path
iltRampUpMin=20 # time to evenly ramp up all stress clients to full PSU
iltInServiceTimeoutMin=15 # time to wait for all servers to go in service
iltTargetPsuTimeoutStartupMin=90 # time to wait for target PSU to be reached on startup before checking perf criteria
iltTargetPsuRunDurationMin=480 # time to execute tests before graceful shutdown and final report
iltHostReqFreeDiskSpaceKB=10000000 # amount of free disk space required for deploy (10000000KB ~ 10GB)
iltHostReqFreeFileHandles=130000 # number of free file handles, required for deploy
iltHostReqProcLimit=140000 # process limit, required for deploy
iltIgnoreReportResult=1 # ignore failed ILT reports (use for tuning report profile)
iltRepopulateDb=0 # whether 'runilt' command populates the db (user/clubs) with clean data
iltClientUseRedirector=0 # control stress client to use redirector to login and reconnect, must be set to 1 to test ZDT functionalities
iltGraphite="eadp.gos.graphite-web.bio-iad.ea.com"
iltGraphiteExport=0

#
# Deploy configuration
#
deployEnv=ilt # 'ilt' is a custom deploy setting that avoids collisions with existing filenames that use the common environments, e.g. cert|dev|stress|test in server_stress_pc.cfg
deployRdir=test # dev|test
deployUser=gos_build
deployPlat=pc
deploySvcName=gosilt-dashboard-pc
deployMail=nobody@ea.com

# The box which hosts the mock XBL or PSN service, if mock testing is used. If mocking Xbox One Live, deployPlat should be set to xone. If mocking PS4 PSN, deployPlat should be set to ps4.
# deployMock1stPartyUrl=470985-gosltapp1039.rspc-iad.ea.com:8085

# The jump box within target env that all client/server packages uploaded through to reduce upload bandwidth/delay
# NOTE: Per/user SSH keys *must* be setup from this jump box to all other hosts to enable proxied deploys.
# deployProxy=470976-gosltapp1030.rspc-iad.ea.com

#
# Server configuration <blazehost>:<blazetype>:<numinstances>
#
configMaster=470985-gosltapp1039.rspc-iad.ea.com

masters+=("470985-gosltapp1039.rspc-iad.ea.com:coreNSMaster:1")

masters+=("470986-gosltapp1040.rspc-iad.ea.com:coreMaster:1")
masters+=("470987-gosltapp1041.rspc-iad.ea.com:coreMaster:1")
masters+=("470988-gosltapp1042.rspc-iad.ea.com:coreMaster:1")
masters+=("470989-gosltapp1043.rspc-iad.ea.com:coreMaster:1")

slaves+=("470986-gosltapp1040.rspc-iad.ea.com:mmSlave:2")
slaves+=("470987-gosltapp1041.rspc-iad.ea.com:mmSlave:2")
slaves+=("470988-gosltapp1042.rspc-iad.ea.com:mmSlave:2")
slaves+=("470989-gosltapp1043.rspc-iad.ea.com:mmSlave:2")

slaves+=("470986-gosltapp1040.rspc-iad.ea.com:searchSlave:6")
slaves+=("470987-gosltapp1041.rspc-iad.ea.com:searchSlave:6")
slaves+=("470988-gosltapp1042.rspc-iad.ea.com:searchSlave:6")
slaves+=("470989-gosltapp1043.rspc-iad.ea.com:searchSlave:6")

slaves+=("470986-gosltapp1040.rspc-iad.ea.com:coreSlave:10")
slaves+=("470987-gosltapp1041.rspc-iad.ea.com:coreSlave:10")
slaves+=("470988-gosltapp1042.rspc-iad.ea.com:coreSlave:10")
slaves+=("470989-gosltapp1043.rspc-iad.ea.com:coreSlave:10")

slaves+=("470986-gosltapp1040.rspc-iad.ea.com:grSlave:1")
slaves+=("470987-gosltapp1041.rspc-iad.ea.com:grSlave:1")
slaves+=("470988-gosltapp1042.rspc-iad.ea.com:grSlave:1")
slaves+=("470989-gosltapp1043.rspc-iad.ea.com:grSlave:1")

redis+=("470985-gosltapp1039.rspc-iad.ea.com:main:4")

# the graphite poller requires the redis port to be in the 30000-39999 range
portRedisBase=30000
portBase=15000
portsPerServer=20

#
# Client configuration, <clienthost>:<numsets>
#
clients+=("470990-gosltapp1044.rspc-iad.ea.com:8")
clients+=("470991-gosltapp1045.rspc-iad.ea.com:8")
clients+=("470992-gosltapp1046.rspc-iad.ea.com:8")
clients+=("470993-gosltapp1047.rspc-iad.ea.com:8")

#
# Client test set configuration, <instance name/log file base name>:<numconnections>:<testconfig>
#
# The projected total number of users is the total <numsets> in the client config above * the total <numconnections> below.
# The "target PSU" (number of online users to start tracking values at) is based on the projected total.
# You can override the calculated "target PSU" by explicitly setting 'iltTargetPsu' in this file.
#
stressinstances+=("ilt:5000:../etc.ilt.sports/stress/stress-integrated-detailed.cfg")
stressinstances+=("dds:500:../etc.ilt.sports/stress/integrated/stress-fifa-mm-dedicatedserver.cfg")
stressinstances+=("qm:3000:../etc.ilt.sports/stress/integrated/stress-fifa-mm-quick.cfg")
stressinstances+=("qm4p:500:../etc.ilt.sports/stress/integrated/stress-fifa-mm-quick-4p.cfg")
#stressinstances+=("qm16p:150:../etc.ilt.sports/stress/integrated/stress-fifa-mm-quick-16p.cfg")
stressinstances+=("mmclubs:800:../etc.ilt.sports/stress/integrated/stress-fifa-mm-club.cfg")
#stressinstances+=("mmcustom:175:../etc.ilt.sports/stress/integrated/stress-fifa-mm-custom.cfg")
stressinstances+=("gb:80:../etc.ilt.sports/stress/integrated/stress-fifa-gamebrowser.cfg")
