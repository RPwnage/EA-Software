/*! ************************************************************************************************/
/*!
    \file psnerror.tdf

    \attention
        (c) Electronic Arts. All Rights Reserved.
*/
/*! ************************************************************************************************/

namespace Blaze
{
namespace PSNServices
{
[description="Common error data for PSN WebAPIs.", trackChanges = true]
class PsnError
{
    [tag="code", description="PSN error code."]
    int32_t mCode; // By PSN spec, range is 2113536-2117631

    [tag="mesg", description="PSN error message."]
    string(128) mMessage; // By PSN spec, max 128 ascii chars

    [tag="reas", description="PSN: error cause."]
    string(-1) mReason;

    [tag="rfid", description="PSN: identifier for tracing errors."]
    string(36) mReferenceId; // UUIDs by RFC: max 36 chars

    [tag="sorc", description="PSN: where error occurred."]
    string(-1) mSource;
};

[description="Common error response for PSN WebAPI calls.", trackChanges = true]
class PsnErrorResponse
{
    [tag="rtna", description="The time when the next call to the rpc could be made (per title per user). In UNIX epoch seconds."]
    float mRateLimitNextAvailable;

    [tag="rttp", description="The rate limit time period. Populated if request specified header X-NP-RateLimit: GetDetail."]
    string(-1) mRateLimitTimePeriod;

    [tag="rtli", description="The Sony enforced limit on number of the rpc's calls, over the rate limit time period (per title per user). Populated if request specified header X-NP-RateLimit: GetDetail."]
    uint16_t mRateLimitLimit;

    [tag="rtre", description="Number of calls to the rpc remaining until the limit is reached. Populated if request specified header X-NP-RateLimit: GetDetail."]
    uint16_t mRateLimitRemaining;

    [tag="err", description="PSN Error."]
    PsnError mError;
};

}
}
