<project default="regress">
	<package name="AarLibraryLooseManifest"/>

	<DynamicLibrary name="NativeLibrary">
	    <sourcefiles>
			<includes name="NativeLibrary/**.cpp"/>
		</sourcefiles>
	</DynamicLibrary>

	<AndroidAar name="AarLibrary" gradle-directory="AarLibrary">
		<dependencies>
			AarLibraryLooseManifest/NativeLibrary
		</dependencies>
	</AndroidAar>

	<target name="regress">
		<property name="output-aar" value="@{PathCombine('@{GetModuleOutputDirEx('lib', 'AarLibraryLooseManifest', 'AarLibrary', 'runtime')}', 'AarLibrary.aar')}"/>
		<delete file="${output-aar}"/>

		<call target="gensln"/>
		<call target="buildsln"/>

		<fail unless="@{FileExists(${output-aar})}"/>

		<!-- todo check our .aar contains nativelibrary.so -->
	</target>
</project>