<?xml version="1.0" encoding="utf-8"?>
<project name="EAUser" default="build">

	<optionset name="config.targetoverrides">
		<option name="test-build" value="include" />
		<option name="test-run" value="include" />
	</optionset>

	<package name="EAUser" initializeself="true"/>

	<property name="runtime.buildmodules" value="IEAUser EAUser"/>

	<!-- ********************* -->

	<property name="runtime.IEAUser.buildtype" value="${EAUserBuildType}" />

	<property name="runtime.IEAUser.includedirs">
		${package.dir}/include
	</property>

	<fileset name="runtime.IEAUser.headerfiles">
		<includes name="${package.dir}/include/IEAUser/**.h" />
	</fileset>

	<property name="runtime.IEAUser.autodependencies">
		${property.value}
		coreallocator
		EAAssert
		EABase
		IEAController
		EASTL
		EAThread
		EAStdC
	</property>

	<!-- ********************* -->

	<property name="runtime.EAUser.autodependencies">
		IEAUser
		coreallocator
		EAAssert
		EABase
		EAController
		EASTL
		EAThread
		EAStdC
	</property>

	<do if="${package.EAUser.use-origin??false}">
		<property name="runtime.EAUser.builddependencies">
			${property.value}
			OriginSDK
		</property>
	</do>

	<property name="runtime.EAUser.usedependencies">
		EABase
		EAController
	</property>

	<property name="runtime.EAUser.buildtype" value="${EAUserBuildType}"/>

	<do if="${config-system} == 'capilano' || ${config-system} == 'winrt'">
		<property name="runtime.EAUser.warningsuppression">
			-wd4471
			-wd4472
			-wd4626 <!-- vccorlib.h: (used by WinRT EventHandles) assignment operator was implicitly defined as deleted because a base class assignment operator is inaccessible or deleted -->
			-wd4628 <!-- vccorlib.h: digraphs not supported with -Ze. -->
			-wd5027 <!-- vccorlib.h: (used by WinRT EventHandles) move operator was implicitly defined as deleted because a base class assignment operator is inaccessible or deleted -->
		</property>
	</do>

	<do if="${config-system}==capilano and !(${gsdk.enabled??false})">
		<property name="package.sdkreferences.capilano">
			${property.value}
			Xbox Services API, Version=8.0
		</property>
	</do>

	<fileset name="runtime.IEAUser.sourcefiles">
		<includes name="${package.dir}/source/IEAUser/IEAUser.cpp"/>
	</fileset>

	<fileset name="runtime.EAUser.sourcefiles">
		<includes name="${package.dir}/source/*.cpp" />
		<includes name="${package.dir}/source/internal/*.cpp" />
		<includes name="${package.dir}/source/${config-folder-name}/*.cpp" />
		<includes name="${package.dir}/source/null/*.cpp" if="${config-system} == iphone" />
		<excludes name="${package.dir}/source/IEAUser/IEAUser.cpp"/>
	</fileset>

	<property name="runtime.EAUser.includedirs">
		${package.dir}/include/internal/
		${package.EAUser.includedirs}
	</property>

	<fileset name="runtime.EAUser.headerfiles">
		<includes name="${package.dir}/include/EAUser/*.h" />
		<includes name="${package.dir}/include/${config-folder-name}/EAUser/*.h" />
		<includes name="${package.dir}/include/null/EAUser/*.h" if="${config-system} == iphone"/>
		<includes name="${package.dir}/include/kettle/EAUser/*.h" if="${config-system} == kettle"/>
	</fileset>

	<property name="runtime.EAUser.defines" if="${Dll??false} and ${config-compiler} == 'vc'">
		${property.value}
		EAUSER_API=__declspec(dllexport)
	</property>

	<property name="runtime.IEAUser.defines" if="${Dll??false} and ${config-compiler} == 'vc'">
		${property.value}
		EAUSER_API=__declspec(dllexport)
	</property>

	<do if="${config-system} == 'kettle'">
		<fileset name="runtime.EAUser.libs" append="true">
			<includes name="${package.kettlesdk.libdir}\libSceUserService_stub_weak.a"/>
			<includes name="${package.kettlesdk.libdir}\libSceNpCommon_stub_weak.a"/>
			<includes name="${package.kettlesdk.libdir}\libSceNpManager_stub_weak.a"/>
			<includes name="${package.kettlesdk.libdir}\libSceNpToolkit2_stub_weak.a"/>
		</fileset>
	</do>

	<do if="${config-system} == 'balin'">
		<fileset name="runtime.EAUser.libs" append="true">
			<includes name="${package.balinsdk.libdir}\libSceSysmodule_stub_weak.a"/>
			<includes name="${package.balinsdk.libdir}\libSceJson2_stub_weak.a"/>
			<includes name="${package.balinsdk.libdir}\libSceNpCppWebApi_stub_weak.a"/>
			<includes name="${package.balinsdk.libdir}\libSceNpManager_stub_weak.a"/>
			<includes name="${package.balinsdk.libdir}\libSceNet_stub_weak.a"/>
			<includes name="${package.balinsdk.libdir}\libSceSsl_stub_weak.a"/>
			<includes name="${package.balinsdk.libdir}\libSceHttp2_stub_weak.a"/>
			<includes name="${package.balinsdk.libdir}\libSceNpWebApi2_stub_weak.a"/>
		</fileset>
	</do>

	<do if="${config-system} == 'ps5'">
		<fileset name="runtime.EAUser.libs" append="true">
			<includes name="${package.ps5sdk.libdir}\libSceSysmodule_stub_weak.a"/>
			<includes name="${package.ps5sdk.libdir}\libSceJson2_stub_weak.a"/>
			<includes name="${package.ps5sdk.libdir}\libSceNpCppWebApi_stub_weak.a"/>
			<includes name="${package.ps5sdk.libdir}\libSceNpManager_stub_weak.a"/>
			<includes name="${package.ps5sdk.libdir}\libSceNet_stub_weak.a"/>
			<includes name="${package.ps5sdk.libdir}\libSceSsl_stub_weak.a"/>
			<includes name="${package.ps5sdk.libdir}\libSceHttp2_stub_weak.a"/>
			<includes name="${package.ps5sdk.libdir}\libSceNpWebApi2_stub_weak.a"/>
		</fileset>
	</do>

	<fileset name="runtime.EAUser.vcproj.excludedbuildfiles">
		<includes name="${package.dir}/doc/**.*" />
		<includes name="${package.dir}/scripts/**.*" />
		<includes name="${package.dir}/*.build" />
	</fileset>

	<!-- ********************* -->
	<!-- Test configuration    -->
	<!-- ********************* -->

	<property name="test.buildmodules" value="IEAUserTest" />
	<property name="test.IEAUserTest.buildtype" value="Program" />
	<property name="test.IEAUserTest.copylocal" value="true"/>

	<property name="test.IEAUserTest.usedependencies">
		EABase
	</property>

	<property name="test.IEAUserTest.builddependencies">
		coreallocator
		EAAssert
		EABase
		EAMain
		EATest
		EAStdC
		EASTL
		EAThread
		MemoryMan
		PPMalloc
	</property>

	<property name="test.IEAUserTest.includedirs">
		${package.dir}/include
	</property>

	<fileset name="test.IEAUserTest.sourcefiles">
		<includes name="${package.dir}/test/*.cpp" />
	</fileset>

</project>
