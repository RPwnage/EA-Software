gamereporting.collectionTimeoutSec = 15,
gamereporting.dbName = "gamereporting",

gamereporting.gameTypes.GR_ArsonCTF_ND = {
            reportProcessorClass = "basic",
            reportCollatorClass = "basic",
            
            report = {
                reportTdf = "Blaze::GameReporting::ArsonCTF_NonDerived::Report",
                
                subreports = {
                    gameAttrs = {
                        reportTdf = "Blaze::GameReporting::ArsonCTF_NonDerived::GameAttributes",
                        gameHistory = [
                            {
                                table = "game",
                                columns = {
                                    replayTimes = "replayTimes",
                                    map = "mapName"
                                }
                            }
                        ]
                    },
                    playerReports = {
                        reportTdf = "Blaze::GameReporting::ArsonCTF_NonDerived::PlayerReport",
                        statUpdates = {
                            PlayerStats = {
                                category = "Core",
                                entityId = "$INDEX$",
                                optional = true,
                                keyscopes = {},
                                stats = {
                                    kills = { value="kills", type="INCREMENT" },
                                    deaths = { value="deaths", type="INCREMENT" },
                                    wins = { value="resultMap[^wins]", type="INCREMENT" },
                                    losses = { value="resultMap[^losses]", type="INCREMENT" }
                                }
                            }
                        },
                        gameHistory = [
                            {
                                table = "player",
                                primaryKey = [ "id" ],
                                columns = {
                                    id = "$INDEX$",
                                    kills = "kills",
                                    deaths = "deaths",
                                    flagsCaptured = "flagsCaptured"
                                }
                            }
                        ],
                        subReports = {
                            skippedReport = {
                                reportTdf = "Blaze::GameReporting::ArsonCTF_NonDerived::SkippedPlayerReport",
                                skipComparison = true,
                                statUpdates = {
                                    PlayerStats = {
                                        category = "Core",
                                        entityId = "$INDEX$",
                                        keyscopes = {},
                                        stats = {
                                            longestTimeAlive = { value="longestTimeAlive", type="INCREMENT" }
                                        }
                                    }
                                },
                                gameHistory = [
                                    {
                                        table = "player",
                                        primaryKey = [ "id" ],
                                        columns = {
                                            id = "$INDEX$",
                                            longestTimeAlive = "longestTimeAlive"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                }
            }
        }


gamereporting.gameTypes.GR_ArsonCTF_Derived = {
            reportProcessorClass = "basic",
            reportCollatorClass = "basic",
                    
            report = {
                reportTdf = "Blaze::GameReporting::ArsonCTF_Common::Report",
                
                subreports = {
                    gameAttrs = {
                        reportTdf = "Blaze::GameReporting::ArsonCTF_Common::GameAttributes",
                        gameHistory = [
                            {
                                table = "game",
                                columns = {
                                    replayTimes = "replayTimes",
                                    map = "mapName"
                                }
                            }
                        ]
                    },
                    playerReports = {
                        reportTdf = "Blaze::GameReporting::ArsonCTF_Common::PlayerReport",
                        statUpdates = {
                            PlayerStats = {
                                category = "Core",
                                entityId = "$INDEX$",
                                optional = true,
                                keyscopes = {},
                                stats = {
                                    kills = { value="kills", type="INCREMENT" },
                                    deaths = { value="deaths", type="INCREMENT" }
                                }
                            }
                        },
                        gameHistory = [
                            {
                                table = "player",
                                primaryKey = [ "id" ],
                                columns = {
                                    id = "$INDEX$",
                                    kills = "kills",
                                    deaths = "deaths"
                                }
                            }
                        ],
                        subReports = {
                            customReport = {
                                reportTdf = "Blaze::GameReporting::ArsonCTF_Derived::PlayerReport",
                                gameHistory = [
                                    {
                                        table = "player",           // add to the player table, so no need to specify primary key info
                                        columns = {
                                            flagsCaptured = "flagsCaptured"
                                        }
                                    }
                                ]
                            }
                        }                            
                    }
                }
            }                
            
        }       
    }
gamereporting.gameHistory.historyExpiry = "0d"  

gamereporting.gameHistoryReporting = {
        queries = [
             { name = "recent_arson_game",
               typeName = "GR_ArsonCTF_ND",
               maxGamesToReturn = 10
             }
        ]

        views = [
           
        ]
    }    
