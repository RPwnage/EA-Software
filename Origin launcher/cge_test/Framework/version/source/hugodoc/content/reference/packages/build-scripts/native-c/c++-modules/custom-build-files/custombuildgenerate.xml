<project xmlns="schemas/ea/framework3.xsd">

  <package name="MyPackage"/>

  . . . . . .

  <optionset name="custom-generate-source">
    <option name="name" value="custom-generate"/>
    <option name="description" value='Processing input file "%filename%%fileext%"...'/>
    <option name="build.tasks"            value="gen"/>
    <option name="gen.executable"         value="${package.CustomGenerator.dir}/bin/gen.exe}"/>
    <option name="gen.options">
      -i %filepath%
      -o ${package.builddir}\__Generated__\${config-system}\%filereldir%\%filename%
    </option>
    <option name="inputs">
      ${package.CustomGenerator.dir}/bin/gen.exe}
    </option>
    <option name="outputs">
      ${package.builddir}\__Generated__\${config-system}\%filereldir%\%filename%.cpp
      ${package.builddir}\__Generated__\${config-system}\%filereldir%\%filename%.h
    </option>
    <option name="sourcefiles">
      ${package.builddir}\__Generated__\${config-system}\%filereldir%\%filename%.cpp
    </option>
    <option name="headerfiles">
      ${package.builddir}\__Generated__\${config-system}\%filereldir%\%filename%.h
    </option>
    <option name="bulkbuild" value="on"/>
    <!-- Include generated source in the bulkbuild fileset -->
  </optionset>

  <Library name="MyModule">
    <custombuildfiles>
      <includes name="src/*.inp" optionset="custom-generate-source"/>
    </custombuildfiles>
  </Library>
  
  . . . . . .

</project>