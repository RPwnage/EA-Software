/*! ************************************************************************************************/
/*!
    \file search_config_server.tdf

    \attention
        (c) Electronic Arts. All Rights Reserved.
*/
/*! ************************************************************************************************/
[headername="gamemanager/tdf/gamemanagerconfig_server.h"]
#include "gamemanager/gen/gamemanagerconfig_server.tdf"

namespace Blaze
{
namespace Search
{


class SearchSlavePreconfig
{
    // required to decode the scenarios config (even though we don't actually need the scenario definitions beyond the timeouts.)
    [tag="ram", reconfigurable="yes", description="The attributes available to the rules."]
    Blaze::GameManager::ScenarioRuleAttributeMap mRuleAttributeMap;
};

class SearchConfig
{
    [tag="gcfg", description="GameSession configuration."]
    Blaze::GameManager::GameSessionServerConfig gameSession;
    
    [tag="gbsb", description="GameBrowserServerConfig object."]
    Blaze::GameManager::GameBrowserServerConfig gameBrowser;
    
    [tag="mmsc", description="MatchmakingServerConfig object."]
    Blaze::GameManager::MatchmakingServerConfig matchmakerSettings;

    [tag="scfg", description="MatchmakingScenarioConfig object."]
    Blaze::GameManager::ScenariosConfig scenariosConfig;

    [tag="mftm", reconfigurable="yes", description="This defines the filters used."]
    Blaze::GameManager::MatchmakingFilterMap mFilters;

    [tag="prop", reconfigurable="yes", description="Properties config."]
    Blaze::GameManager::PropertyConfig mProperties;

    [tag="rnc", description="ReteNetworkConfig object."]
    Blaze::GameManager::ReteNetworkConfig rete;
    
    [tag="mtnl", default=0, reconfigurable="yes", description="[DEPRECATED] NO EFFECT."]
    uint32_t maximumTotalNumberOfLists;
    
    [tag="mlpi", default=250, reconfigurable="yes", description="Maximum number of subscription lists allowed to process new games per idle."]
    uint32_t maxSubscriptionListsProcessedPerIdle;

    [tag="mgui", default=5000, reconfigurable="yes", description="The maximum number of games per idle a NotifyGameListUpdate notification will attempt to encode during send to listeners."]
    uint32_t maxGamesUpdatedPerIdle;
    
    [tag="ocpu", default=95, reconfigurable="yes", description="The CPU percentage at which the search slave will reject new requests due to being overloaded"]
    uint32_t overloadCpuPercent;

    [tag="samd", default=false, reconfigurable="yes", description="Search slave automatically shuts down when the GM master it is assigned to disconnects"]
    bool shutdownOnAssignedMasterDisconnect;
    
    [tag="tmpl", reconfigurable="yes", description="Game templates named in this list aren't tracked in the Rete tree. Games omitted from the Rete tree are invisible to all GB lists and find game matchmaking."]
    list<Blaze::GameManager::TemplateName> gameTemplatesOmittedFromRete;
    
    [tag="ggtr", default=false, reconfigurable="yes", description="If true, GameGroups are never tracked in the Rete tree. Can reduce load for titles with many GameGroups and no matchmaking or gamebrowsing into groups. Matchmaking as or with groups is not impacted. When set to 'true', this setting takes precedence over the list in gameTemplatesOmittedFromRete."]
    bool omitGameGroupsFromRete;
};

} // namespace GameManager
} // namespace Blaze