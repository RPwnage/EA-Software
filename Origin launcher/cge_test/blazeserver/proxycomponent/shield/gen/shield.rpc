[ headername="shield/tdf/shield.h" ]
#include "shield/gen/shield.tdf"

namespace Blaze
{
namespace Shield
{

[
	id = custom/9876,
	description = "Proxy component for making RPC calls to the Shield Backend.",
	details = "Used to perform anti-cheat detections between the client the Shield Backend.",
	proxyOnly = true,
	http = {
		payloadEncoderSubType = "NORMAL"
	}
]
component Shield
{
	errors
	{
		[ description = "500 internal server error" ]
		SHIELD_INTERNAL_SERVER_ERROR = 1;
	}

	slave
	{
		methods
		{
			[
				id = 1,
				description = "Sends data to the shield backend.",
				requires_authentication = false,
				client_export = false,

				errors = {
					SHIELD_INTERNAL_SERVER_ERROR
				},

				http = {
					resource = "/{game}/{platform}",
					method = "POST",
					status_code_errors = {
						500 = SHIELD_INTERNAL_SERVER_ERROR
					},
					contentType = "application/protobuf",
					requestPayloadBlob = "data",
					responsePayloadBlob = "data"
				}
			]
			ShieldBackendResponse sendToBackend(ShieldBackendRequest);
		}
	}
}

} // namespace Shield
} // namespace Blaze
