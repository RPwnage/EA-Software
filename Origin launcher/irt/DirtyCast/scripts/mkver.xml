<project>
    <target name="mkver" description="prebuid step to generate source file indicating build version.">
        <!-- Required to use ${package.DirtySDK.dir}, ${package.BlazeSDK.dir}, doing this is bad practice so only doing when absolutely necessary -->
        <dependent name="BlazeSDK"/>
        <dependent name="DirtySDK"/>

        <taskdef assembly="${nant.project.temproot}/mkvertask.dll">
            <sources>
                <includes name="${package.dir}/scripts/mkver.cs"/>
            </sources>
        </taskdef>

        <mkver outdir="${versiondir}" pregen="${dirtycast-pregen??false}"/>
    </target>

    <target name="clean_pregen" description="deletes the pregenerated asset file to prevent stale versions">
        <delete file="${package.builddir}/pregen_version"/>
    </target>

    <property name="package.preprocess" value="mkver"/>
</project>
