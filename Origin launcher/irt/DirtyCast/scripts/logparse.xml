<project>
    <do if="${logparse.geoip??true}">
        <!-- Required for using GeoIP -->
        <property name="VS.version" value="VS2010"/>
        <property name="VS.version" value="VS2015" if="${config-vs-version??0.0} gte '14.0'"/>
    </do>

    <Program name="logparse" frompartial="DCProgram" outputdir="${package.dir}/logger/run">
        <sourcefiles optionset="CFile" basedir="${package.dir}">
            <includes name="logger/logparser.c"/>
            <includes name="logger/logparse.c"/>
        </sourcefiles>

        <headerfiles basedir="${package.dir}">
            <includes name="logger/logparse.h"/>
        </headerfiles>

        <includedirs>
            ${package.dir}/logger
        </includedirs>

        <dependencies>
            <auto>
                <do if="${logparse.geoip??true}">
                    GeoIP
                </do>
                DirtySDK
            </auto>
        </dependencies>

        <config>
            <buildoptions fromoptionset="config-options-program-c">
            </buildoptions>

            <defines>
                <do if="${logparse.geoip??true}">
                    LOGPARSE_GEOIP
                </do>
            </defines>
        </config>

        <buildsteps>
            <run workingdir="${package.dir}/logger/run"/>
        </buildsteps>
    </Program>
</project>
