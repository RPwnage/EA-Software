<html>
  <head>
    <title>Stress Run $report_target_psu k PSU - $report_target_profile</title>
    <style>
       div { background:#bbbbbb;border:1px solid black;margin:10px;padding:5px }
       pre { background:#eeeeee;border:1px dashed black;margin:20px;padding:5px }
       table { background:#eeeeee;border:1px solid black }
       td { padding-right:10px }
       th { padding-right:10px; border-bottom:1px solid black }
    </style>
  </head>
  <body>
     <h1>Stress Run $report_target_psu k PSU - $report_target_profile</h1>
     <p>Rundate: $report_rundate </p>

     <h2>$report_success</h2>
     <div>
       <b>Target PSU: </b> $report_target_psu k</br>
       <b>Profile: </b> $report_target_profile </br>

       <h3>Error Report</h3>
       <ul>
$report_errors
       </ul>
     </div>

     <h2>Server Setup</h2>
     <div>
       <h3>Build Information</h3>
       <b>Version:</b> $report_version <br/>
       <b>Source location:</b> $report_sourcelocation <br/>
       <b>Built time:</b> $report_buildtime <br/>

       <h3>Cluster Configuration</h3>
       <table>
         <thead>
           <tr>
             <th>Instance Type</th>
             <th>Count</th>
           </tr>
         </thead>
         <tbody>
$report_clusterconfig
         </tbody>
       </table>

       <h3>Deployment Information</h3>
       <table>
         <thead>
           <tr>
             <th>Host</th>
             <th>Kernel</th>
             <th>Physical Memory (free)</th>
             <th>Swap used</th>
             <th>CPU cores @ Mhz (cache size)</th>
$report_instances
           </tr>
         </thead>
         <tbody>
$report_instancecounts
         </tbody>
       </table>

       <h3>Redis</h3>
       <table>
         <thead>
           <tr>
             <th>Host</th>
             <th>Kernel</th>
             <th>Physical Memory (free)</th>
             <th>Swap used</th>
             <th>CPU cores @ Mhz (cache size)</th>
$report_redisclusters
           </tr>
         </thead>
         <tbody>
$report_redisclustercounts
         </tbody>
       </table>

       <h3>Databases</h3>
       <table>
         <thead>
           <tr>
             <th>Database</th>
             <th>Name</th>
             <th>Type</th>
             <th>Host</th>
             <th>Kernel</th>
             <th>Physical Memory (free)</th>
             <th>Swap used</th>
             <th>CPU cores @ Mhz (cache size)</th>
           </tr>
         </thead>
         <tbody>
$report_databases
         </tbody>
       </table>
 
    </div>


     <h2>Target Load</h2>
     <div>
       Target load is set using:
       <ul>
         <li>Expected RPC rate exercised in the run</li>
         <li>Expected value of health-check status counters</li>
       </ul>
       <p />
$report_psugraph
       <p />
       The following are reports generated for instances that make Game Manager. Please notice that '*' sign next
       to measured value flags that value as out-of-range. Target ranges are shown in table headers. Please look
       at the list of errors in the section at the beginning of this document for details.
       <h3>Game Manager</h3>
       <pre>
$report_tlgamemanager
       </pre>
       <p>
         Graph below shows active game session and active player counts across all Game Manager masters. It is important for these
         not to change significantly during the run. Also, counts on different masters should be close to equal. This is checked by the
         report script duiring the run as presented in above tables (devation), the graph is given here for completeness of the report.
       <p>
       <p>
         <img src=\"$report_games_and_players_graph\" alt=\"GMGauge_ACTIVE_GAMES/GMGauge_ACTIVE_PLAYERS\" />
       </p>
       <a href=\"$report_games_and_players_graph_url\">GMGauge_ACTIVE_GAMES/GMGauge_ACTIVE_PLAYERS</a>

       <h3>Game Manager - Search</h3>
       <pre>
$report_tlsearch
       </pre>
       <p>
         Similarly to the graph above, the following shows active find game session and game list counts across search slaves. The same note
         as above applies here.
       </p>
       <p>
         <img src=\"$report_find_game_gb_lists_graph\" alt=\"SSGaugeActiveFGSessions/SSGaugeGameLists\" />
       </p>
       <a href=\"$report_find_game_gb_lists_graph_url\">SSGaugeActiveFGSessions/SSGaugeGameLists</a>
 
       <h3>Game Manager - Matchmaker</h3>
       <pre>
$report_tlmatchmaker
       </pre>

       <h3>RPC Rates</h3>
       The table below summerizes RPC rates for relevant RPCs as defined by profile. This file contains full report:
       <a href='$report_rpcratediffile'>
         $report_rpcratediffile
       </a>
       <pre>
$report_rpcrates
       </pre>
     

       <h3>RPC Errors</h3>
       The following table shows sample of RPC errors for RPCs that failed reference rate check on one of the nodes in the system. Full report is in this file:
       <a href='$report_rpcerrorsfile'>
         $report_rpcerrorsfile
       </a>
       <pre>
$report_rpcerrors
       </pre>

       <h3>SQL Execution Rate</h3>
       The success and failure rate of SQL query execution on each database instance are shown in the following table.
       <pre>
$report_sqlrates
       </pre>

     </div>

     <h2>Performance</h2>
     <div>
       <h3>CPU and Memory Usage</h3>
$report_cpumemgraphs

       <h3>Redis</h3>
       <div>
$report_redisgraphs
       </div>

       <h3>Slow Query</h3>
       The following table shows sample of compound "slow-query" log from all database instances. Full log is in this file:
       <a href='$report_slowqueryfilename'>
         $report_slowqueryfilename
       </a>
       Please notice that the script will search only last 1000 lines in each slow query log.
       <pre>
$report_slowquery
       </pre>
 
     </div>
  </body>
</html>

