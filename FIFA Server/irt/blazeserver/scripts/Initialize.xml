<project xmlns="schemas/ea/framework3.xsd">
  <include file="${package.blazeserver.dir}/scripts/format_excl.xml"/>
  <include file="${package.blazeserver.dir}/scripts/lite.xml"/>

  <property name="components" value=""/>

  <choose>
    <do if="${blazeserver.lite??false}">
      <!-- If we are building lite version, the components need to be specified explicitly. -->
      <property name="components" value="${blazeserver.lite.components}"/>
    </do>
    <do>
      <foreach item="Directory" in="${package.blazeserver.dir}/*component" property="base" local="true">
        <foreach item="Directory" in="${base}" property="path" local="true">
          <property name="GenFolderExist" value="@{DirectoryGetFileCount('${path}/gen','*')}" local="true" if="@{DirectoryExists('${path}/gen')}"/>
          <do if="@{DirectoryGetFileCount('${path}', '*')} > 0 or ${GenFolderExist} > 0">
            <property name="components" value="${property.value} @{PathGetFileName('${path}')}"/>
          </do>
        </foreach>
      </foreach>
    </do>
  </choose>

  <publicdata packagename="blazeserver">
    <!-- TODO: normally we put the includedirs, libs, buildtypes and dlls here.
               currently our builds aren't using the normal dependency structure.
               if we ever get around to fixing that then add the module information
               here -->
  </publicdata>
</project>
