[headername="gamereporting/tdf/gamereporting.h"]
#include "gamereporting/gen/gamereporting.tdf"

namespace Blaze
{
[usePtrOption=true]
namespace GameReporting
{

///////////////////////////////////////////////////////////////////////////////
//  ArsonLeagueGameKeyscopes style reports
//
//      Submitted report TDFs. 
namespace ArsonLeagueGameKeyscopes
{

[
    tdfid = "hash",
    tdfregistration = "explicit",
    description = "Game attributes",
    details = "Used by the ArsonLeagueGameKeyscopes tests to contain game data submitted by clients to game reporting"
]
class GameAttributes
{
    [tag="leag", description="League"]
    EntityId leagueId;

    [tag="map", description="Map"]
    uint16_t mapId;
};


[
    tdfid = "hash",
    tdfregistration = "explicit",
    description = "Player report",
    details = "Used by the ArsonLeagueGameKeyscopes tests to represent a player within a report"
]
class PlayerReport
{
    [tag="wins", description="Wins"]
    uint16_t wins;

    [tag="loss", description="Losses"]
    uint16_t losses;
    
    [tag="slvl", description="Seasonal Level"]
    uint16_t seasonLevel;
};


[
    tdfid = "hash",
    tdfregistration = "explicit",
    description = "Offensive athlete report",
    details = "Used by the ArsonLeagueGameKeyscopes tests to represent an offensive athlete within a report"
]
class OffensiveAthlete
{
    [tag="serv", description="Serves"]
    uint16_t serves;

    [tag="team", description="Team"]
    uint16_t team;
};


[
    tdfid = "hash",
    tdfregistration = "explicit",
    description = "Defensive athlete report",
    details = "Used by the ArsonLeagueGameKeyscopes tests to represent a defensive athlete within a report"
]
class DefensiveAthlete
{
    [tag="blks", description="Blocks"]
    uint16_t blocks;
};

[
    tdfid = "hash",
    tdfregistration = "explicit",
    description = "The basis for a league game report",
    details = "Used by the ArsonLeagueGameKeyscopes tests to represent a report"
]
class Report
{
    [tag="game", description="Game attributes"]
    GameAttributes gameAttrs;
    
    [tag="plyr", description="Player Reports"]
    map<GameManager::PlayerId, PlayerReport> playerReports;
    
    [tag="offs", description="Offensive Athlete Reports"]
    map<int64_t, OffensiveAthlete> offensiveAthleteReports;
    
    [tag="defs", description="Defensive Athlete Reports"]
    map<int64_t, DefensiveAthlete> defensiveAthleteReports;
};


}   // ArsonLeagueGameKeyscopes

}   // GameReporting
}   // Blaze