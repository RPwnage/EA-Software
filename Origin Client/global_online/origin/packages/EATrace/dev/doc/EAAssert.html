<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<Title>EAAssert</title>

    <link type="text/css" rel="stylesheet" href="UTFDoc.css">
    <meta name="author" content="Paul Pedriana">
</head>
<body bgcolor="#FFFFFF">
<h1>EAAssert</h1>

<h2>Introduction</h2>
<p>EAAssert is not an independent module but is a component of EATrace. However, we provide some basic information here for users who don't immediately recognize 
    that EATrace houses assertion functionality. The reason assertion functionality is part of the trace system is that assertion reports flow through the trace/log 
    system. This makes for unified control of the runtime diagnostics of the application.</p>
<p>To learn about the trace/log system, see the documentation for <a href="EATrace.html">EATrace</a>. There's quite a bit of flexibility present in the assert/trace/log 
    system; we won't be able to easily cover it all here, so check out EATrace.h and post questions to the discussion group if you want more information.</p>
<h2>Supported functionality</h2>
<table width="100%" border="1">
    <tr> 
        <td valign="top"><b>Macro</b></td>
        <td valign="top"> 
            <p><b>Debug build behaviour</b><br>
                Each line below applies to all items to the left.</p>
        </td>
        <td valign="top"><b>Release build behaviour</b><br>
            Each line below applies to all items to the left.</td>
    </tr>
    <tr> 
        <td valign="top">EA_ASSERT<br>
            EA_ASSERT_MESSAGE <br>
            EA_ASSERT_FORMATTED </td>
        <td valign="top"> May print output.<br>
            May display alert dialog.<br>
            Condition evaluated.<br>
            May evaluate output arguments. </td>
        <td>No output.<br>
            No alert dialog.<br>
            No condition evaluation.<br>
            No output argument evaluation. </td>
    </tr>
    <tr> 
        <td valign="top">EA_VERIFY<br>
            EA_VERIFY_MESSAGE<br>
            EA_VERIFY_FORMATTED </td>
        <td valign="top">May print output.<br>
            May display alert dialog.<br>
            Condition evaluated.<br>
            May evaluate output arguments. </td>
        <td valign="top">No output.<br>
            No alert dialog.<br>
            Condition evaluated.<br>
            No output argument evaluation. </td>
    </tr>
    <tr> 
        <td valign="top">EA_FAIL_MESSAGE<br>
            EA_FAIL_FORMATTED </td>
        <td valign="top">May display alert dialog.<br>
            May evaluate output arguments. </td>
        <td valign="top">No alert dialog.<br>
            No output argument evaluation. </td>
    </tr>
</table>
<p>ASSERT is your basic method of testing a condition and putting up an alert if the condition is false. If the condition is false then a message is traced and then 
    an alert is displayed to the user giving the user an option to stop execution or continue. The ASSERT completely goes away in a release build.</p>
<p>VERIFY is the same as ASSERT but the condition expression is evaluated in a release build.</p>
<p>FAIL is the same as ASSERT except there is no condition to test; the condition is always true. Thus, FAIL_MESSAGE("error") is the same as ASSERT_MESSAGE(false, 
    "error").
</p>
<h2>What to assert</h2>
Asserts should be used to detect failures that are programming errors. Not all failures are programming errors. The inability of the C fopen function to open a file is not a programming error. A function failure is an error if and only if it violates one of the functions preconditions, prevents the function from meeting any of its callers' preconditions, prevents the function from meeting any of its own postconditions, or reestablishing any invariant that the function shares responsibility (with the caller and other functions) of maintaining. <br>
<br>
Let's make bullet points out of this. There are three kinds of programming errors that should be detected via assertions:
<ul>
  <li><span style="font-style: italic;">Violation of, or failure to achieve, a precondition</span>: The function detects a violation of one of its own preconditions (e.g. a parameter or state restriction), or encounters a condition that prevents it from meeting a precondition of another essential function that must be called.</li>
  <li><span style="font-style: italic;">Failure to achieve a postcondition</span>: The function encounters a condition that prevents it from establishing one of its own postconditions. If the function has a return value, producing a valid return value is a postcondition.</li>
  <li><span style="font-style: italic;">Failure to reestablish an invariant</span>: The function encounters a condition that prevents it from reestablishing (maintaining) an invariant that it is responsible for maintaining. This is a special kind of postcondition that applies particularly to member fucntions; an essential postcondition of every nonprivate member function is that it must reestablish its class's invariants.</li>
</ul>
<p>See the book "C++ Coding Standards", item #70 for a good description of what we say here. The above descriptions and policty is largely taken from that book.</p>
<h2>Example usage </h2>
<p>Note that in the case of FORMATTED examples below that the format needs to be enclosed by parentheses. This is because the C++ standard doesn't support variable 
    arguments in macros, despite the fact that some compilers support them anyway.</p>
<p>EA_ASSERT:</p>
<pre class="code-example">EA_ASSERT(1 + 1 == 2);
 
EA_ASSERT_MESSAGE(1 + 1 == 2, "Math is broken.");
 
EA_ASSERT_FORMATTED(1 + 1 == 2, (&quot;Math is broken in file %s, line %d&quot;, __FILE__, __LINE__));</pre>
<p>EA_VERIFY (same as EA_ASSERT except the expression is evaluated in a release build):</p>
<pre class="code-example">EA_VERIFY(MoveCharacter());
 
EA_VERIFY_MESSAGE(MoveCharacter(), "MoveCharacter() failed.");
 
EA_VERIFY_FORMATTED(MoveCharacter(), (&quot;MoveCharacter() failed in file %s, line %d&quot;, __FILE__, __LINE__));</pre>
EA_FAIL (unilateral failure):
<pre class="code-example">if(!MoveCharacter())
    EA_FAIL_MESSAGE("MoveCharacter() failed.");

if(!MoveCharacter())
    EA_FAIL_FORMATTED((&quot;MoveCharacter() failed in file %s, line %d&quot;, __FILE__, __LINE__));</pre>
<hr>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p> </p>
</body></html>



