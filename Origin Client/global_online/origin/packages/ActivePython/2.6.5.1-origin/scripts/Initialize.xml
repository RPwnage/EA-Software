<!--
================================================================================
Initialize.xml

NAnt build fragment, which sets various properties for clients of the
ActivePython interpreter.  The properties are as follows:

    ${package.ActivePython.exe}        - points at the Python interpreter
    ${package.ActivePython.path}       - path to DLLs used by the interpreter
    ${package.ActivePython.pythonpath} - path used to find Python modules

For details of the PythonPath, see:
    http://www.python.org/windows/python/registry.html

There are three modules supplied with ActivePython (pythonXX.dll,
pythoncomXX.dll and PyWinTypesXX.dll) which the installer places in the
Windows system32 directory.

For this package, the DLLs have been copied to the root of the "installed"
directory.  This allows the modules to be used without any registry settings,
which makes the package self-contained.  End-users will still need to ensure
that ${package.ActivePython.path} is added to the PATH for their build script
for these modules to be available.

(c) 2002-2007 Criterion Software Limited and its licensors. All Rights Reserved. 
================================================================================
-->

<project>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    Set a property referencing the install location.
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <property name="package.ActivePython.installdir"
              value="${package.ActivePython.dir}\installed"/>


    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    Set a property referencing the Python interpreter.
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <property name="package.ActivePython.exe"
              value="${package.ActivePython.installdir}\python.exe"/>


    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    Set properties for each element of the PythonPath.
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <property name="package.ActivePython.pythonpath.core"
              value="${package.ActivePython.installdir}\Lib;${package.ActivePython.installdir}\DLLs;${package.ActivePython.installdir}\Lib\lib-tk"/>
    <property name="package.ActivePython.pythonpath.pythonwin"
              value="${package.ActivePython.installdir}\lib\site-packages\Pythonwin"/>
    <property name="package.ActivePython.pythonpath.win32"
              value="${package.ActivePython.installdir}\lib\site-packages\win32;${package.ActivePython.installdir}\lib\site-packages\win32\lib"/>
    <property name="package.ActivePython.pythonpath.win32com"
              value="${package.ActivePython.installdir}\lib\site-packages"/>
    <property name="package.ActivePython.pythonpath.html5lib"
              value="${package.ActivePython.installdir}\lib\site-packages\html5lib-0.95-py2.6.egg"/>
    <property name="package.ActivePython.pythonpath.argparse"
              value="${package.ActivePython.installdir}\lib\site-packages\argparse-1.2.1-py2.6.egg"/>


    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    Join those properties together to form the default PythonPath.
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <property name="package.ActivePython.pythonpath"
              value="${package.ActivePython.pythonpath.pythonwin};${package.ActivePython.pythonpath.win32};${package.ActivePython.pythonpath.win32com};${package.ActivePython.pythonpath.core};${package.ActivePython.pythonpath.html5lib};${package.ActivePython.pythonpath.argparse}"/>


    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    Construct a path which can be used to execute the Python interpreter.
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <property name="package.ActivePython.path"
              value="${package.ActivePython.installdir}"/>


    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    Check that the Python interpreter is found.
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <fail unless="@{FileExists('${package.ActivePython.exe}')}"
          message="Python interpreter not found"/>

</project>
