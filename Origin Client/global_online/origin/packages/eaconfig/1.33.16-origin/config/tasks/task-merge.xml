<!-- 
     (c) Electronic Arts. All Rights Reserved.
-->
<project>

  <createtask name="MergeOption">
    <parameters>
      <option name="Optionset" value="Required" />
      <option name="OptionName" value="Required" />
      <option name="OptionValue" value="Required" />
    </parameters>
    <code>
      <!--
      <echo message="MergeOption('${MergeOption.Optionset}', '${MergeOption.OptionName}', '${MergeOption.OptionValue}')" if="${nant.verbose}"/>
-->
      <optionset name="${MergeOption.Optionset}" append="true"
        if="@{StrIndexOf(@{OptionSetGetValue('${MergeOption.Optionset}', '${MergeOption.OptionName}')}, ${MergeOption.OptionValue})} == -1">
        <option name="${MergeOption.OptionName}" >
          @{OptionSetGetValue('${MergeOption.Optionset}', '${MergeOption.OptionName}')}
          ${MergeOption.OptionValue}
        </option>
      </optionset>

    </code>
  </createtask>

  <createtask name="MergeOptionset">
    <parameters>
      <option name="OriginalOptionset" value="Required" />
      <option name="FromOptionset" value="Required" />
    </parameters>
    <code>
      <!--
      <echo message="MergeOptionset('${MergeOptionset.OriginalOptionset}', '${MergeOptionset.FromOptionset}')" if="${nant.verbose}"/>
-->

      <foreach item="OptionSet" in="${MergeOptionset.FromOptionset}" property="mergeoption" >
        <task name="MergeOption" Optionset="${MergeOptionset.OriginalOptionset}" OptionName="${mergeoption.name}" OptionValue="${mergeoption.value}" />
      </foreach>

    </code>
  </createtask>

</project>