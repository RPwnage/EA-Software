<!-- 
     (c) Electronic Arts. All Rights Reserved.
-->
<project>
  <dependent name="Xdk" />

  <property name="config-system"      value="xbox"/>
  <property name="config-compiler"        value="vc"/>
  <property name="config-platform"        value="xbox-vc"/>

  <property name="exe-suffix"        value=".exe"/>

  <property name="lib-prefix"        value=""/>
  <property name="lib-suffix"        value=".lib"/>


  <!-- <build> task properties -->
  <property name="build.pathstyle"    value="Windows"/>


  <!-- <cc> task properties -->
  <property name="cc.defines">
    ${property.value}
    _XBOX
  </property>

  <property name="cc.gccdefines">
    ${cc.gccdefines}
    _XBOX
  </property>

  <property name="cc.options">
    <!-- clear the default options and start fresh with config supplied options -->
  </property>

  <property name="cc.includedirs">
    ${property.value}
    ${package.Xdk.appdir}\include
  </property>

  <optionset name="config-options-common">
    <option name="buildset.cc.defines" >
      @{OptionSetGetValue('config-options-common', 'buildset.cc.defines')}
      _XBOX
    </option>
    <option name="buildset.cc.includedirs" >
      @{OptionSetGetValue('config-options-common', 'buildset.cc.includedirs')}
      ${package.Xdk.appdir}\xbox\include
    </option>
    <option name="buildset.link.options" >
      @{OptionSetGetValue('config-options-common', 'buildset.link.options')}
      -subsystem:xbox    <!-- specify subsystem to xbox -->
      -machine:I386    <!-- specify target platform to ix86 -->
      -fixed:no      <!-- fixed base address -->
    </option>
  </optionset>

  <optionset name="config-options-dynamiclibrary" >
      <option name="generatedll"              value="on" />
    <option name="buildset.name"                        value="DynamicLibrary" />
    <option name="buildset.tasks"                       value="asm cc link" />
    <option name="buildset.cc.defines"                  value="EA_DLL" />
    <option name="buildset.link.options">
      -implib:"%outputdir%/%outputname%.lib"  <!-- name of import library -->
    </option>
  </optionset>

  <!-- This template is only used for NAnt builds. -->
  <property name="cc.template.commandline">
    %defines%
    %includedirs%
    %options%
    -Fo"%objectfile%"                  <!-- object file name -->
    "%sourcefile%"
  </property>

  <property name="cc.template.includedir"    value='-I "%includedir%"'/>
  <property name="cc.template.define"        value='-D %define%'/>


  <!-- <link> task properties -->
  <property name="link.options">
    ${link.options}
    -subsystem:xbox    <!-- specify subsystem to xbox -->
    -machine:I386    <!-- specify target platform to ix86 -->
    -fixed:no      <!-- fixed base address -->
  </property>

  <property name="link.librarydirs">
    ${property.value}
    ${package.Xdk.appdir}\lib
  </property>

  <property name="link.options">
    <!-- clear the default options and start fresh with config supplied options -->
  </property>

  <property name="link.libraries">
  </property>

  <property name='link.template.librarydir'  value='-libpath:"%librarydir%"'/>
  <property name='link.template.libraryfile' value='"%libraryfile%"'/>
  <property name='link.template.objectfile'  value='"%objectfile%"'/>

  <property name="link.template.commandline">
    %options%
    %librarydirs%
    %objectfiles%
    %libraryfiles%
  </property>

  <property name="link.postlink.program" value="${package.Xdk.appdir}/xbox/bin/imagebld" />

  <property name="link.postlink.commandline" >
    -nologo
    -debug
    -testid:0x45410026
    -testname:%outputname%
    -stack:0x10000
    -NOLIBWARN
    -in:%outputdir%\%outputname%.exe
    -out:%outputdir%\%outputname%.xbe
  </property>

  <property name="platform.sdklibs.regular">
    ${package.Xdk.appdir}/xbox/lib/xgraphics.lib
    ${package.Xdk.appdir}/xbox/lib/dsound.lib
    ${package.Xdk.appdir}/xbox/lib/d3d8.lib
    ${package.Xdk.appdir}/xbox/lib/d3dx8.lib
    ${package.Xdk.appdir}/xbox/lib/xapilib.lib
    ${package.Xdk.appdir}/xbox/lib/xboxkrnl.lib
  </property>

  <property name="platform.sdklibs.debug">
    ${package.Xdk.appdir}/xbox/lib/xgraphicsd.lib
    ${package.Xdk.appdir}/xbox/lib/dsoundd.lib
    ${package.Xdk.appdir}/xbox/lib/d3d8d.lib
    ${package.Xdk.appdir}/xbox/lib/d3dx8d.lib
    ${package.Xdk.appdir}/xbox/lib/xboxkrnl.lib
    ${package.Xdk.appdir}/xbox/lib/xbdm.lib
    ${package.Xdk.appdir}/xbox/lib/xapilibd.lib
  </property>

</project>
