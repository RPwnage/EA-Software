<!-- 
     (c) Electronic Arts. All Rights Reserved.
-->
<project>

  <!-- eaconfig options override defined by user -->
  <do if="@{PropertyExists('eaconfig.options-override.file')}">

    <!-- expand input property-->
    <eval type="property" code="${eaconfig.options-override.file}" property="__options-override.expanded-path"/>

    <!-- relative path is combined with masterconfig file directory -->
    <property name="__options-override.masterconfig-dir" value="@{PathGetDirectoryName('${nant.project.masterconfigfile}')}" local="true"/>
    <property name="__options-override.expanded-path" value="@{PathCombine('${__options-override.masterconfig-dir}', '${__options-override.expanded-path}')}"/>
    <property name="__options-override.expanded-path" value="@{PathGetFullPath('${__options-override.expanded-path}')}" />

    <property name="__options-override.path"  value="@{PathGetDirectoryName('${__options-override.expanded-path}')}"              local="true"/>
    <property name="__options-override.file"  value="@{PathGetFileNameWithoutExtension('${__options-override.expanded-path}')}"   local="true"/>
    <property name="__options-override.ext"   value="@{PathGetExtension('${__options-override.expanded-path}')}"                  local="true"/>

    <property name="__options-override.file.1"   value="@{PathCombine('${__options-override.path}', '${__options-override.file}.${config-platform}${__options-override.ext}')}"  local="true"/>
    <property name="__options-override.file.2"   value="@{PathCombine('${__options-override.path}', '${__options-override.file}.${config-system}${__options-override.ext}')}"  local="true"/>
    <property name="__options-override.file.3"   value="@{PathCombine('${__options-override.path}', '${__options-override.file}${__options-override.ext}')}"  local="true"/>

    <choose>
      <do if="@{FileExists('${__options-override.file.1}')}">
        <include file="${__options-override.file.1}" />
      </do>
      <do if="@{FileExists('${__options-override.file.2}')}">
        <include file="${__options-override.file.2}" />
      </do>
      <do if="@{FileExists('${__options-override.file.3}')}">
        <include file="${__options-override.file.3}" />
      </do>
      <do>
        <warn message="Property eaconfig.options-override.file='${eaconfig.options-override.file}' but none of the files: '${__options-override.file.1}' or '${__options-override.file.2}' or '${__options-override.file.3}' exists."/>
      </do>
    </choose>
  </do>

  <include file="generatebuildoptionset.xml" />

    <Combine />
    
</project>
