<project>

    <!-- Create a list of contrib libraries to use, based on the platform in question -->

    <!-- =================  Android  =================== -->
    <property if="${config-system} == 'android'" name="package.DirtySDK.contribs.available">
    </property>

    <!-- =================  Freebox  =================== -->
    <property if="${config-system} == 'freebox'" name="package.DirtySDK.contribs.available">
    </property>

    <!-- =================  iPhone  =================== -->
    <property if="${config-system} == 'iphone'" name="package.DirtySDK.contribs.available">
    </property>

    <!-- =================  OSX  =================== -->
    <property if="${config-system} == 'osx'" name="package.DirtySDK.contribs.available">
    </property>

    <!-- =================  PC  =================== -->
    <property if="${config-system} == 'pc'" name="package.DirtySDK.contribs.available">
        dirtyisp
        dirtystrings
        voipaux
    </property>

    <!-- =================  PC64  =================== -->
    <property if="${config-system} == 'pc64'" name="package.DirtySDK.contribs.available">
        voipaux
    </property>

    <!-- =================  Playbook  =================== -->
    <property if="@{StrStartsWith('${config-system}', 'playbook')}" name="package.DirtySDK.contribs.available">
    </property>

    <!-- =================  PS3  =================== -->
    <property if="${config-system} == 'ps3'" name="package.DirtySDK.contribs.available">
        dirtystrings
    </property>

    <!-- =================  PSP2  ================== -->
    <property if="${config-system} == 'psp2'" name="package.DirtySDK.contribs.available">
    </property>

    <!-- =================  Revolution  ============ -->
    <property if="${config-system} == 'rev'" name="package.DirtySDK.contribs.available">
        dirtystrings
    </property>

    <!-- =================  UNIX  =================== -->
    <property if="${config-system} == 'unix'" name="package.DirtySDK.contribs.available">
    </property>

    <!-- =================  UNIX64  =================== -->
    <property if="${config-system} == 'unix64'" name="package.DirtySDK.contribs.available">
    </property>

    <!-- =================  XENON  =================== -->
    <property if="${config-system} == 'xenon'" name="package.DirtySDK.contribs.available">
        atgframework
    </property>

    <!-- clear out the selected extensions and then add in the extenstions as requested -->
    <property name="package.DirtySDK.contribs.selected"/>

    <foreach property="package.DirtySDK.forloop.contrib" item="String" in="${package.DirtySDK.contribs.available}">

        <!-- If we are building DirtySDK and we don't have a parent project, then DirtySDK is being built by itself,
             so build all contribs. -->

        <!-- do if="@{PropertyExists('package.DirtySDK.inbuild')}" -->
        <do unless="@{PropertyExists('package.DirtySDK.nocontrib')}" >
            <property name="package.DirtySDK.contrib.${package.DirtySDK.forloop.contrib}" value="1"/>
        </do>
        <!-- /do -->

        <!-- If the property for the contrib wasn't provided, then assume they don't want the contrib! -->
        <do unless="@{PropertyExists('package.DirtySDK.contrib.${package.DirtySDK.forloop.contrib}')}" >
            <!-- echo message="Disabling ${package.DirtySDK.forloop.contrib} since the property package.DirtySDK.contrib.${package.DirtySDK.forloop.contrib} wasn't provided." / -->
            <property name="package.DirtySDK.contrib.${package.DirtySDK.forloop.contrib}" value="0"/>
        </do>

        <do if="${package.DirtySDK.contrib.${package.DirtySDK.forloop.contrib}} == '1'">
            <!-- Don't echo the message, but leave in the functionality...
            <echo message="DirtySDK [platform ${config-system}] contrib ${package.DirtySDK.forloop.contrib} enabled.  To disable contrib, set property package.DirtySDK.contrib.${package.DirtySDK.forloop.contrib} to 0." />
            -->
            <property name="package.DirtySDK.contribs.selected">
                ${property.value}
                ${package.DirtySDK.forloop.contrib}
            </property>
        </do>

        <!-- Don't echo this message either.
        <do unless="${package.DirtySDK.contrib.${package.DirtySDK.forloop.contrib}} == '1'">
            <echo message="DirtySDK [platform ${config-system}] contrib ${package.DirtySDK.forloop.contrib} disabled.  To enable contrib, set property package.DirtySDK.contrib.${package.DirtySDK.forloop.contrib} to 1." />
        </do>
        -->
    </foreach>

    <!-- now do something useful with the contrib list - like adding the include directories for each -->
    <foreach property="package.DirtySDK.forloop.contrib" item="String" in="${package.DirtySDK.contribs.available}">
        <include file="contrib/${package.DirtySDK.forloop.contrib}-initialize.xml"/>
    </foreach>

</project>
