<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DirtySock: netgamelink.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../eadp-horizontal-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DirtySock
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d4/d79/netgamelink_8c.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">netgamelink.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module provides a packet layer peer-peer interface which utilizes a lower layer "comm" module. This module is used either by netgamedist (if it is being used) or can be accessed directly if custom online game logic is being used. This module also calculates latency (ping) and maintains statistics about the connection (number of bytes send/received). The direct application interface is currently weak but will be improved.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="../../d1/dc9/dirtysock_8h_source.html">DirtySDK/dirtysock.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d7/d4c/dirtymem_8h_source.html">DirtySDK/dirtysock/dirtymem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../dc/d4f/netgamepkt_8h_source.html">DirtySDK/game/netgamepkt.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d6/dd4/netgamelink_8h_source.html">DirtySDK/game/netgamelink.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d6/d08/commall_8h_source.html">DirtySDK/comm/commall.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">netgamelink internal state  <a href="../../d8/d97/structNetGameLinkRefT.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d86/structGameStreamB.html">GameStreamB</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ada8ab189068d244326935c6e7926801f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d79/netgamelink_8c.html#ada8ab189068d244326935c6e7926801f">KEEP_ALIVE_TIME</a>&#160;&#160;&#160;500</td></tr>
<tr class="separator:ada8ab189068d244326935c6e7926801f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5adac32f07d6b90c7f285521e960023c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d79/netgamelink_8c.html#a5adac32f07d6b90c7f285521e960023c">MAX_PACKET_QUEUE</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:a5adac32f07d6b90c7f285521e960023c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:adc091b794bcff50486a05e54fa3ce63a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../de/d86/structGameStreamB.html">GameStreamB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d79/netgamelink_8c.html#adc091b794bcff50486a05e54fa3ce63a">GameStreamB</a></td></tr>
<tr class="separator:adc091b794bcff50486a05e54fa3ce63a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa42676b2bc74359b81572bbbf86f4713"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#gaa42676b2bc74359b81572bbbf86f4713">NetGameLinkCreate</a> (void *pCommRef, int32_t owner, int32_t buflen)</td></tr>
<tr class="memdesc:gaa42676b2bc74359b81572bbbf86f4713"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct the game client.  <a href="../../d8/d04/group__NetGameLink.html#gaa42676b2bc74359b81572bbbf86f4713">More...</a><br/></td></tr>
<tr class="separator:gaa42676b2bc74359b81572bbbf86f4713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8097f095648d6bbccf633d6c028123cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga8097f095648d6bbccf633d6c028123cd">NetGameLinkDestroy</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *ref)</td></tr>
<tr class="memdesc:ga8097f095648d6bbccf633d6c028123cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destruct the game client.  <a href="../../d8/d04/group__NetGameLink.html#ga8097f095648d6bbccf633d6c028123cd">More...</a><br/></td></tr>
<tr class="separator:ga8097f095648d6bbccf633d6c028123cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c6e0da31b13c384a962f2999d180dcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga4c6e0da31b13c384a962f2999d180dcf">NetGameLinkCallback</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *ref, void *calldata, void(*callproc)(void *calldata, int32_t kind))</td></tr>
<tr class="memdesc:ga4c6e0da31b13c384a962f2999d180dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a callback function.  <a href="../../d8/d04/group__NetGameLink.html#ga4c6e0da31b13c384a962f2999d180dcf">More...</a><br/></td></tr>
<tr class="separator:ga4c6e0da31b13c384a962f2999d180dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44771db7e19b78b1c51bda395bfe6a6f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga44771db7e19b78b1c51bda395bfe6a6f">NetGameLinkStatus</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *<a class="el" href="../../dc/d6e/dirtylib_8c.html#a9f729169e4dfc82c61b5092753337a45">pRef</a>, int32_t iSelect, int32_t iValue, void *pBuf, int32_t iBufSize)</td></tr>
<tr class="memdesc:ga44771db7e19b78b1c51bda395bfe6a6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return current link status.  <a href="../../d8/d04/group__NetGameLink.html#ga44771db7e19b78b1c51bda395bfe6a6f">More...</a><br/></td></tr>
<tr class="separator:ga44771db7e19b78b1c51bda395bfe6a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03e67c20f21362a3f4eb80381903d240"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga03e67c20f21362a3f4eb80381903d240">NetGameLinkSend</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *ref, <a class="el" href="../../d5/dd2/structNetGamePacketT.html">NetGamePacketT</a> *pkt, int32_t len)</td></tr>
<tr class="memdesc:ga03e67c20f21362a3f4eb80381903d240"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle incoming packet stream from upper layer.  <a href="../../d8/d04/group__NetGameLink.html#ga03e67c20f21362a3f4eb80381903d240">More...</a><br/></td></tr>
<tr class="separator:ga03e67c20f21362a3f4eb80381903d240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e68ee24cdb0b884bacf8d2fe4a1c7b4"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga0e68ee24cdb0b884bacf8d2fe4a1c7b4">NetGameLinkPeek2</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *ref, <a class="el" href="../../d5/dd2/structNetGamePacketT.html">NetGamePacketT</a> **pkt, uint32_t mask)</td></tr>
<tr class="memdesc:ga0e68ee24cdb0b884bacf8d2fe4a1c7b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peek into the buffer, for the first packet type matching mask.  <a href="../../d8/d04/group__NetGameLink.html#ga0e68ee24cdb0b884bacf8d2fe4a1c7b4">More...</a><br/></td></tr>
<tr class="separator:ga0e68ee24cdb0b884bacf8d2fe4a1c7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab61c5773c462a49faced2022d4b7357c"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#gab61c5773c462a49faced2022d4b7357c">NetGameLinkPeek</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *ref, <a class="el" href="../../d5/dd2/structNetGamePacketT.html">NetGamePacketT</a> **pkt)</td></tr>
<tr class="memdesc:gab61c5773c462a49faced2022d4b7357c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peek into the buffer.  <a href="../../d8/d04/group__NetGameLink.html#gab61c5773c462a49faced2022d4b7357c">More...</a><br/></td></tr>
<tr class="separator:gab61c5773c462a49faced2022d4b7357c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga768d6a4c9a83c4f270b50067fcbea18d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga768d6a4c9a83c4f270b50067fcbea18d">NetGameLinkRecv2</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *ref, <a class="el" href="../../d5/dd2/structNetGamePacketT.html">NetGamePacketT</a> *buf, int32_t len, uint32_t mask)</td></tr>
<tr class="memdesc:ga768d6a4c9a83c4f270b50067fcbea18d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outgoing packet stream to upper layer.  <a href="../../d8/d04/group__NetGameLink.html#ga768d6a4c9a83c4f270b50067fcbea18d">More...</a><br/></td></tr>
<tr class="separator:ga768d6a4c9a83c4f270b50067fcbea18d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01dc81a4bac118c90e2a8bcb433f12c3"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga01dc81a4bac118c90e2a8bcb433f12c3">NetGameLinkRecv</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *ref, <a class="el" href="../../d5/dd2/structNetGamePacketT.html">NetGamePacketT</a> *buf, int32_t len, uint8_t bDist)</td></tr>
<tr class="memdesc:ga01dc81a4bac118c90e2a8bcb433f12c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outgoing packet stream to upper layer.  <a href="../../d8/d04/group__NetGameLink.html#ga01dc81a4bac118c90e2a8bcb433f12c3">More...</a><br/></td></tr>
<tr class="separator:ga01dc81a4bac118c90e2a8bcb433f12c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga222005fa6ca0d07b06cad738d35cb8b7"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga222005fa6ca0d07b06cad738d35cb8b7">NetGameLinkControl</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *ref, int32_t iSelect, int32_t iValue, void *pValue)</td></tr>
<tr class="memdesc:ga222005fa6ca0d07b06cad738d35cb8b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">NetGameLink control function. Different selectors control different behaviors.  <a href="../../d8/d04/group__NetGameLink.html#ga222005fa6ca0d07b06cad738d35cb8b7">More...</a><br/></td></tr>
<tr class="separator:ga222005fa6ca0d07b06cad738d35cb8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee1072dc98765ab34d7aa6aa729403a2"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#gaee1072dc98765ab34d7aa6aa729403a2">NetGameLinkUpdate</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *<a class="el" href="../../dc/d6e/dirtylib_8c.html#a9f729169e4dfc82c61b5092753337a45">pRef</a>)</td></tr>
<tr class="memdesc:gaee1072dc98765ab34d7aa6aa729403a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides NetGameLink with time, at regular interval. Need for streams handling. Also handles QoS stage when during link startup.  <a href="../../d8/d04/group__NetGameLink.html#gaee1072dc98765ab34d7aa6aa729403a2">More...</a><br/></td></tr>
<tr class="separator:gaee1072dc98765ab34d7aa6aa729403a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1faa3a3f9dfb68de5133777e3f3a07a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d08/structNetGameLinkStreamT.html">NetGameLinkStreamT</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#ga1faa3a3f9dfb68de5133777e3f3a07a7">NetGameLinkCreateStream</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *<a class="el" href="../../dc/d6e/dirtylib_8c.html#a9f729169e4dfc82c61b5092753337a45">pRef</a>, int32_t iSubChan, int32_t iIdent, int32_t iInpLen, int32_t iOutLen, int32_t iSynLen)</td></tr>
<tr class="memdesc:ga1faa3a3f9dfb68de5133777e3f3a07a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a stream.  <a href="../../d8/d04/group__NetGameLink.html#ga1faa3a3f9dfb68de5133777e3f3a07a7">More...</a><br/></td></tr>
<tr class="separator:ga1faa3a3f9dfb68de5133777e3f3a07a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff6d19232294a897efec6733e867addc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d04/group__NetGameLink.html#gaff6d19232294a897efec6733e867addc">NetGameLinkDestroyStream</a> (<a class="el" href="../../d8/d97/structNetGameLinkRefT.html">NetGameLinkRefT</a> *<a class="el" href="../../dc/d6e/dirtylib_8c.html#a9f729169e4dfc82c61b5092753337a45">pRef</a>, <a class="el" href="../../d3/d08/structNetGameLinkStreamT.html">NetGameLinkStreamT</a> *pStream)</td></tr>
<tr class="memdesc:gaff6d19232294a897efec6733e867addc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a stream.  <a href="../../d8/d04/group__NetGameLink.html#gaff6d19232294a897efec6733e867addc">More...</a><br/></td></tr>
<tr class="separator:gaff6d19232294a897efec6733e867addc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module provides a packet layer peer-peer interface which utilizes a lower layer "comm" module. This module is used either by netgamedist (if it is being used) or can be accessed directly if custom online game logic is being used. This module also calculates latency (ping) and maintains statistics about the connection (number of bytes send/received). The direct application interface is currently weak but will be improved. </p>
<dl class="section attention"><dt>Attention</dt><dd>Copyright (c) Tiburon Entertainment / Electronic Arts 2002. ALL RIGHTS RESERVED.</dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 12/19/00 (GWS) First Version </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ada8ab189068d244326935c6e7926801f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KEEP_ALIVE_TIME&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5adac32f07d6b90c7f285521e960023c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PACKET_QUEUE&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="adc091b794bcff50486a05e54fa3ce63a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../de/d86/structGameStreamB.html">GameStreamB</a>  <a class="el" href="../../de/d86/structGameStreamB.html">GameStreamB</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<table x-use-null-cells
        style="float: alignright;
                width: 100%;
                border-spacing: 0px;"
        cellspacing=0
        width=100%>
<tr>
<td style="text-align: left;
            padding-left: 0px;
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;"
    align=left><span style="font-family: Arial, sans-serif; font-size: 8pt;">EA Digital Platform</span></td>
<td style="text-align: right;
            padding-left: 0px;
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;"
    align=right><span style="font-family: Arial, sans-serif; font-size: 8pt;">&#169;
 2014 Electronic Arts Inc.</span><br />
<span style="font-family: Arial, sans-serif; font-size: 8pt;">Generated
 on: Thu Jul 9 2015 16:31:31</span><br />
</td></tr>
</table>
