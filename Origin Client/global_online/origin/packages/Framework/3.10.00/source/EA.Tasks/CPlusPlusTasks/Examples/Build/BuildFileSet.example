<?xml version="1.0"?>
<example>
<para>An example of compiling and linking using a fileset and optionset.</para>
<code file="Hello.build">
<![CDATA[
<project default="build">
    <dependent name="VisualStudio" version="7.1.1-4"/>
    <property name="outdir" value="build"/>

    <fileset name="MyFileSet">
        <includes name="hello.c"/>
    </fileset>

    <optionset name="MyOptionSet">
        <option name="build.tasks" value="cc lib link" /> 
        <option name="cc.threadcount" value="1" /> 
    </optionset>

    <target name="build">
        <build type="MyOptionSet" outputdir="${outdir}" name="hello">
            <sources>
                <includes fromfileset="MyFileSet" />
            </sources>
        </build>
        <fail message="Program did not build" unless="@{FileExists('${outdir}/hello.exe')}"/>
    </target>
</project>
]]>
</code>
<para>Where <c>hello.c</c> contains:</para>
<code file="hello.c">
<![CDATA[
#include <stdio.h>

void main()
{
    printf("Hello, World!\n");
}
]]>
</code>
</example>
