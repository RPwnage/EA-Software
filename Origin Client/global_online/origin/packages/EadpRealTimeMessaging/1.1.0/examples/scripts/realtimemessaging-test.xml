<project>
    <tests unless="${Dll??false}">
        <dependent name="EadpFoundation"/>

        <Program name="EadpRealTimeMessaging-test">
            <dependencies>
                <auto>
                    ${runtime.EadpRealTimeMessaging.autodependencies}
                    EAMain
                    gtest
                    MemoryMan
                    PPMalloc
                </auto>
            </dependencies>

            <includedirs>
                ${package.dir}/test/include
                ${runtime.EadpRealTimeMessaging.includedirs}
                ${package.EadpFoundation.dir}/test/include
                ${package.EadpRealTimeMessaging.dir}/test/include
            </includedirs>
            
            <headerfiles>
                <includes name="${package.dir}/test/**.h"/>
                <includes fromfileset="runtime.EadpRealTimeMessaging.headerfiles" />
            </headerfiles>
            
            <sourcefiles>
                <includes name="${package.dir}/test/**.cpp" />
                <includes name="${package.EadpFoundation.dir}/test/main.cpp" />
                <includes name="${package.EadpFoundation.dir}/test/source/test/util/*.cpp"/>
                <includes fromfileset="runtime.EadpRealTimeMessaging.sourcefiles" />
            </sourcefiles>
                
            <config>
                <defines>
                    ${package.EadpRealTimeMessaging.sharedDefines}
                    <do if="${package.EadpFoundation.use_default_allocator??false}">
                        EADPSDK_USE_DEFAULT_ALLOCATOR=1
                    </do>
                </defines>
            </config>
        </Program>
    </tests>
</project>
