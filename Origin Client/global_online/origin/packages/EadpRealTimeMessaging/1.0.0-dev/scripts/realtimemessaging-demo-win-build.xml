<project>
    <examples>
        <Program name="EadpRealTimeMessaging-demo-win">
            <includedirs>
                ${package.dir}/examples/
            </includedirs>
            <headerfiles basedir="${package.dir}/examples/">
                <includes name="demo/win/**/*.h"/>
            </headerfiles>
            <sourcefiles basedir="${package.dir}/examples/">
                <includes name="demo/win/**/*.cpp"/>
            </sourcefiles>

            <dependencies>
                <auto>
                    ${runtime.EadpRealTimeMessaging.autodependencies}
                    EadpRealTimeMessaging/EadpRealTimeMessaging
                    EadpAuthentication/EadpAuthentication
                    MemoryMan
                    PPMalloc
                    EAOrigin
                </auto>
            </dependencies>
            
            <buildsteps>
                <packaging deployassets="true">
                    <assetfiles basedir="${package.dir}/examples/demo/resources">
                        <includes name="eadpsdk.json"/>
                    </assetfiles>
                </packaging>
            </buildsteps>

            <config>
                <defines>
                    ${package.EadpRealTimeMessaging.sharedDefines}
                    <do if="${package.EadpFoundation.use_default_allocator??false}">
                        EADPSDK_USE_DEFAULT_ALLOCATOR=1
                    </do>
                    <do if="${package.EadpAuthentication.use_pc_service??false}">
                        EADPSDK_USE_PC_SERVICE=1
                    </do>
                </defines>
                <warningsuppression>
                    <do if="${Dll??false} and ${config-compiler} == 'vc'">
                        -wd4251   <!-- class 'X' needs to have dll-interface to be used by clients of class 'Y' -->
                    </do>
                </warningsuppression>

                <buildoptions>
                    <option name="buildset.link.options" if="${config-system} == 'pc' or ${config-system} == 'pc64'">
                        ${option.value}
                        /OPT:REF
                    </option>
                    <!-- since we specify /OPT:REF to silence the warning about incremental linking just disabled it -->
                    <option name="incrementallinking" value="off" if="${config-system} == 'pc' or ${config-system} == 'pc64'"/>
                </buildoptions>
            </config>
            <copylocal value="true" if="${Dll??false} and ${config-compiler} == 'vc'"/>
        </Program>
    </examples>
</project>

