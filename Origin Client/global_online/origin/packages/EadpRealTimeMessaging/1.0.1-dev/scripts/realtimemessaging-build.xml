<project>
    <runtime>
        <property name="buildtype" local="true" value="Library"/>
        <property name="buildtype" local="true" value="DynamicLibrary" if="${Dll??false}"/>

        <Library name="EadpRealTimeMessaging" buildtype="${buildtype}" if="${config-system} == 'pc'
                                                                           or ${config-system} == 'pc64'
                                                                           or ${config-system} == 'osx'
                                                                           or ${config-system} == 'osx64'">
            <includedirs>
                ${package.dir}/include
                ${package.dir}/source
            </includedirs>

            <headerfiles basedir="${package.dir}">
                <includes name="include/**/*.h" />
                <includes name="source/**/*.h" />
            </headerfiles>
            
            <sourcefiles basedir="${package.dir}">
                <includes name="source/**/*.cpp" />
            </sourcefiles>
            <dependencies>
                <auto>
                    DirtySDK
                    coreallocator
                    EAAssert
                    EAStdC
                    EASTL
                    EAThread
                    EAJson
                    EadpFoundation
                </auto>
            </dependencies>

            <config>
                <defines>
                    ${package.EadpRealTimeMessaging.sharedDefines}
                    EADP_MESSAGING_VERSION="${package.targetversion}"
                    EADPSDK_PACKAGE_NAME="EadpRealTimeMessaging"
                    <do if="${Dll??false} and ${config-compiler} == 'vc'">
                        EADPREALTIMEMESSAGING_API=__declspec(dllexport)
                        EADPGENERATED_API=__declspec(dllexport)
                    </do>
                </defines>
                <warningsuppression>
                    <do if="${Dll??false} and ${config-compiler} == 'vc'">
                        -wd4251 <!-- 'identifier' : class 'type' needs to have dll-interface to be used by clients of class 'type2' -->
                    </do>
                </warningsuppression>
            </config>
            <!-- This also works for XCode. "excludedbuildfiles" defines a list of files that are excluded from the build but are added to the visual studio project as non-buildable files. -->
            <visualstudio>
                <excludedbuildfiles>
                    <includes name="Initialize.xml" basedir="${package.dir}/scripts" if="${EadpRealTimeMessaging.ShowBuildScripts??false}"/>
                    <includes name="proto/**/*.proto" basedir="${package.dir}" if="${EadpRealTimeMessaging.ShowProtoFiles??false}"/>
                </excludedbuildfiles>
            </visualstudio>
            <bulkbuild enable="true" />
        </Library>
    </runtime>
</project>
