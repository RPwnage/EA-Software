<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>ExceptionHandler Changes</title>
  <meta content="text/html; charset=us-ascii" http-equiv="Content-Type">
  <meta name="author" content="Paul Pedriana">
  <meta name="description" content="Describes changes between package versions.">
  <style type="text/css">
	.ToDo {color: #FF0000}
	.small {
		font-size: smaller
    }
	.code {
		font-family: "Courier New", Courier, mono;
		font-size: 9pt;
	}
  </style>
</head>

<body>

<h1>ExceptionHandler Changes
  
</h1>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.12.01</span> (July 29, 2013)</p>
<p>Changes</p>
<ul>
    <li>Minor fixes to test harness to work with EAMain-2.00.00 and above.</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.12.00</span> (July 22, 2013)</p>
<p>Release notes</p>
<ul>
  <li>This release implements a refactoring and augmenting of the interface. It should be mostly or entirely backward-compatible, though some functions have been deprecated in favor of new functions. </li>
</ul>
<p>Changes</p>
<ul>
  <li>Added ExceptionHandler::GetAllocator/SetAllocator, which allows you to set the allocator used for EACallstack symbol lookups.</li>
  <li>Added ExceptionHandler::SetReportFileName, which lets you explicitly set the file name of the next generated report file. </li>
  <li>Added a char8_t version of ExceptionHandler::SetReportDirectory.</li>
  <li>Added ExceptionHandler::RemoveReportFile, which lets you remove the last generated report file. You can also do this manually by getting the path to the last generated report file and removing it yourself.</li>
  <li>Added ExceptionHandler::GetExceptionInfo, which is the new means to get platform-specific information about the exception that occurred. Previous means are now deprecated. </li>
  <li>Added support for automatically connecting exception handling to EAThread-created threads under platforms (e.g. XBox 360) that require try/catch based exception handling. See the ExceptionHandler::RunTrapped declaration for the new functions and documentation with example usage. </li>
  <li>Added ExceptionHandler::GetCallstackFlags, to match SetCallstackFlags.</li>
  <li>Added ExceptionHandler::ReadMinidumpBegin, ReadMinidumpPart, ReadMinidumpEnd. This allows users to read minidump files from disk in a way that doesn't allocate memory and thus potentially upset the in-process exception.</li>
  <li>Added         GetDefaultExceptionHandler and SetDefaultExceptionHandler, which allow you to declare a default globally accessible exception handler. </li>
  <li>Added ReportWriter::GetAllocator and SetAllocator, though these are automatically called by their owning ExceptionHandler and so are needed only with standalone uses of ReportWriter.<br> 
  </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.11.01</span> (June 3, 2013)</p>
<p>Changes </p>
<ul>
  <li>Fix for build failure with VS2012</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.11.00</span> (May 7, 2013)</p>
<p>Changes </p>
<ul>
  <li>
    <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> Added Windows support for kModeVectored, kModeCPP, and SimulateExceptionHandling().</p>
  </li>
  <li>Added functions ReadReportBegin(), ReadReportPart(...), ReadReportEnd()</li>
  <li>Fixed warning on clang</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.10.04</span> (April 3rd, 2013)</p>
<p>Changes </p>
<ul>
  <li>Fixed a bug in Win64 reporting of module (DLL) base addresses where it was chopping the address from 64 to 32 bits on print.</li>
  <li>Use EAMain as entry point for unit tests</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.10.03</span> (November 5th, 2012)</p>
<p>Changes </p>
<ul>
<li>Mac Support Improvements</li>
<li>Added poll timeout to ExceptionHandlerApple::MachThreadFunction. Implemented by Trent Tuggle.</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.10.02</span> (October 1st, 2012)</p>
<p>Changes </p>
<ul>
<li>Fixed a bug in Apple (OS X and iOS) where the excpetion handler would default to trying to use C try/catch instead of OS-level exception handling, due to uninitialized member variables and a couple missing switch break statements.</li>
<li>Added thread lists for XBox 360 exception reports.</li>
<li>Improved Windows 64 bit OS detection and reporting, and added Unix OS bit-ness reporting. </li>
<li> _resetstkoflw is no longer available on non-desktop Microsoft platforms. This will have little or no impact on users in practice. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.10.01</span> (July 30th, 2012)</p>
<p>Changes </p>
<ul>
<li>Added additional system version output for XBox 360.</li>
<li>Added an initial ExceptionHandler::GetPlatformExceptionInfo function, which returns the platform-specific exception record. It currently supports only Microsoft and Apple platforms but will be expanded in the future.</li>
<li>Make it so ReportWriter on Windows platforms correctly identifies the case of x86 running on x64. The Windows documentation on this happens to be wrong. Reported by Avery Lee. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.10.00</span> (July 3, 2012)</p>
<p>Changes </p>
<ul>
  <li>This release contains minor modifications to the library in order to build with the latest version of EACallstack (1.15.00+) and EAThread (1.18.00+).</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.09.00</span> (June 4, 2012)</p>
<p>Major changes </p>
<ul>
  <li> Added support for Apple platforms: OS X (32 and 64 bit), iPhone, and iPad.
    <ul>
      <li>The support is currently implemented via mach kernel exception handling as opposed to posix signal handling. Mach signal handling is &quot;better&quot; than posix signal handling under Apple platforms, but if it turns out to have issues then posix signal handling will be added.</li>
      <li>See the doc directory for an example exception report. </li>
      <li>OS X report info is a little more full than iOS report info (e.g. it lists processes while iOS doesn't), but the main information is the same between OS X and iOS. </li>
      <li>This is the first version of this functionality and will likely need some time to shake bugs out and mature. </li>
    </ul>
  </li>
  <li>Addd support for the PSVita (PSP2) platform.
    <ul>
      <li>Currently Sony limits the functionality available in an exception handler here. </li>
    </ul>
  </li>
  <li>Added new report sections: kReportFieldOpenFiles and kReportFieldProcessList. These are used on some platforms but not yet all.</li>
  <li>Added support for setting an exception handling mode (kModeSignalHandling, kModeVectored, etc.), to support platforms that have multiple options for how to catch and handle exceptions, both at the C++ and OS/CPU-level.</li>
  <li>Exception reports on ARM platforms now include ARM disassembly around the site of the exception. </li>
</ul>
<p>Minor changes </p>
<ul>
  <li>WriteThreadList is now supported on Apple and Micrsoft platforms.</li>
  <li>GetExceptionThreadId now returns also a SysThreadId and name. </li>
  <li>Revised kActionDefault to not necessarily always be the same as kActionContinue. Some platforms require you to kill the process upon encountering an exception, so the default action in those cases must be kActionTerminate.</li>
  <li>Revised the behavior of ExceptionHandler::SetEnabled in such a way that ideally has no effect on end-users, but it's not clear.</li>
  <li>Revised the implementation to use EAStdC string functions (sprintf, scanf, etc.) instead of C standard library versions, as making the code portable with the latter was getting tedious. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.08.00</span> (May 7, 2012)</p>
<p>Release notes </p>
<ul>
  <li>Added ReportWriter options: kOptionReportUserName and kOptionReportComputerName, which are off by default in non-debug builds. This is for user security reasons with shipping applications. You can manually enable these options with the ReportWriter::SetOption function. </li>
  <li>Fixed a couple 64 bit printf hex printf bugs in the ReportWriter. It would mistakenly chop the high 32 bits of the printed value. Similarly fixed the 64 bit memory view printout to not chop the lower characters.</li>
  <li>Made Microsoft platform support more generic. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.07.05</span> (December 21, 2011)</p>
<p>Release notes </p>
<ul>
  <li>This release does not require any updated version of EACallstack beyond v1.12.06. </li>
  <li>Updated the PS3 exception handling report writing to deal with the fact that the PS3 exception handler thread has too little stack space to do runtime symbol lookups. </li>
  <li>Fixed the PS3 IsDebuggerRunning code to properly detect the PS3 platform.</li>
  <li>Added a SimulateExceptionHandling function.</li>
  <li>Fixed PS3 exception report user name and user nick name reporting.</li>
  <li>Improved PS3 exception report machine name reporting to report the IP address if the machine didn't have a formal name. </li>
  <li>Fixed WriteStackMemoryView to not skip stack writing on some platforms such as PS3. This was broken in the previous release (v1.07.04).</li>
  <li>Fixed a potential hang in ReportWriter::WriteMemoryView. Reported by Christian Fey. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.07.04</span> (November 21, 2011)</p>
<p>Release notes </p>
<ul>
  <li>Updated ReportWriter::WriteStackMemoryView to be more robust in how it check valid stack ranges. </li>
  <li>Updated code to match EACallstack 1.12.06, which had some changes that affect this package. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.07.03 </span>(October 19, 2011)</p>
<p>Release notes </p>
<ul>
  <li>There was a bug in the EACallstack package prior to version 1.12.05 which caused ExceptionHandler to fail to retrieve exception callstacks on Win64. You need to use EACallstack 1.12.05 or later for this to work. </li>
  <li>Added exception handler registration for Wii. So now the SetEnabled function installs the handler whereas previously it wouldn't and would expect the user to do that at the application level. It now works like other platforms. </li>
  <li>Added support for kExceptionTypeAlignment in CreateException.</li>
  <li>Added Win64 support for kExceptionTypeIllegalInstruction in CreateException. </li>
  <li>Win64 unit tests now succeed. </li>
  <li>Added the <span class="small">EA_EXCEPTIONHANDLER_HANDLING_SUPPORTED</span> config define, which identifies at compile-time if exception handling (a primary feature of this package) is supported. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.07.02 </span>(May 31, 2010)</p>
<p>Release notes </p>
<ul>
  <li>This version provides updates for mobile platforms and for the CodeWarrior (1.3) and PS3 SN (330) compilers.</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.07.01 </span>(October 5, 2009)</p>
<p>Additions </p>
<ul>
  <li>&lt;none&gt;</li>
</ul>
Bug Fixes
<ul>
  <li>Worked around a PS3 bug where the ExceptionCallback's use of sys_dbg_read_ppu_thread_context might result in an error. This was due to a bug in the PS3 kernel which was a race condition between the exception thread and the kernel exception handler. Reported by Chris Baptiste.</li>
  <li>Fixed a PS3 bug introduced with version 1.07.00, where the thread context is incorrectly copied. Reported by Chris Baptiste.</li>
</ul>
Changes
<ul>
  <li>Added code to the Wii exception handler to work around a Wii OS bug which would otherwise prevent users from using the FPU in an exception handler. Reported by Gilbert Wong. </li>
  <li>Modified EA_XBDM_ENABLED slightly. Now it keys off of being equal to 0 or 1 instead of being undefined or defined. A result of this is that you may need to globally define EA_XBDM_ENABLED to 1 in a release build if you want it to work there. For Framework2/Nant users, the ExceptionHandler.build file supports using EA_XBDM_ENABLED=[0|1] in the masterconfig.xml file. Suggested by Kevin Perry. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.07.00 </span>(May 25, 2009)</p>
<p>Additions </p>
<ul>
  <li>Added <font size="-1">EXCEPTIONHANDLER_VERSION / EXCEPTIONHANDLER_VERSION_N</font> to the definition set. This allows for determining the version at compile time.</li>
  <li>Added ExceptionHandler::SetCallstackFlags to allow the user to specify what kind of callstack reporting is done during an exception. </li>
  <li>Added SetMiniDumpFlags to allow finer control over mini dumps on Windows. Implemented by Jon Parise. </li>
</ul>
Bug Fixes
<ul>
  <li>Fixed new SNC PS3 compiler warning for SDK 240 and later. </li>
</ul>
Changes
<ul>
  <li>Added __try/__except statements to WriteExceptionReport in order to catch exceptions. Implemented by Avery Lee. </li>
  <li>Added printf(&quot;\32&quot;) to end of unit test under PS3 and PS2. This indicates to the SN tools that the app is done.</li>
  <li>ExceptionHandler::SetEnabled now returns bool instead of void. </li>
  <li>Converted some EASTL containers to fixed-memory containers. </li>
  <li> Don't allow more than one exception to dump at the same time on Windows; only allow the first one to go through. Implemented by Avery Lee.</li>
  <li>Changed stack dump to not report space beyond the stack pointer on Windows, since that data is modified by Windows during the exception handling process and thus can't have useful information. Implemented by Avery Lee.</li>
  <li>Updated code and build file for GCC to use strict-aliasing.</li>
  <li>Made ExceptionHandler class public member functions virtual. Suggested by Mario Cacciatore. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.06.01 </span>(October 8, 2007)<br>
    <br>
  Additions </p>
<ul>
  <li>&lt;none&gt;</li>
</ul>
Bug Fixes
<ul>
  <li>Fixed compiler warning C4571 under xenon optimized build with exceptions enabled. Submitted by Rashin Arab.</li>
</ul>
Changes
<ul>
  <li>&lt;none&gt;</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.06.00 </span>(September 10, 2007)<br>
    <br>
  Release Notes </p>
<ul>
  <li>This package's dependencies have been simplified; it is no longer dependent on UTFFoundation, MemoryMan, and PPMalloc. See the Changes section. </li>
  <li>This package now supports Win64, though the support is not complete. In particular, the ReportWriter class which logs system information doesn't log all Win64 information that is done for Win32. </li>
  <li>The EACallstack package was recently updated to support Win64 callstack tracing. Since the EACallstack package is a primary package used by this package, you might want to update your copy of the EACallstack package if you want to use this package under Win64 (which it now supports). </li>
</ul>
<p>Additions </p>
<ul>
  <li>Added ability for user to control/override debug allocation names. See in <font size="-1">EXCEPTIONHANDLER_ALLOC_PREFIX</font> in Config.h.</li>
</ul>
Bug Fixes
<ul>
  <li>Fixed unit test bug in the Nant .build file. </li>
</ul>
Changes
<ul>
  <li>Removed a potential dependency on the UTFFoundation, MemoryMan, and PPMalloc packages and added a dependency on the EAStdC package. The current dependencies of this package are: EABase, EAIO, 
EASTL,
EAStdC,
EAAssert,
EAThread,
EACallstack,
CoreAllocator.</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.05.02 </span>(May 4, 2007)<br>
    <br>
  Additions </p>
<ul>
  <li>Added Wii exception handling support, though it is not yet tested. </li>
</ul>
Bug Fixes
<ul>
  <li>Fixed CodeWarrior compile warnings of various sorts.</li>
  <li>Fixed Linux and Cygwin compile warnings and errors of various sorts.</li>
</ul>
Changes
<ul>
  <li>Simplified the .build files into a single ExceptionHandler.build file. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version </span><span style="font-weight: bold;">1.05.01 </span>(Feb 8, 2007)<br>
    <br>
  Additions </p>
<ul>
  <li>&lt;none&gt;. </li>
</ul>
Bug Fixes
<ul>
  <li>Fixed a possible compiler warning related to EAAssert/EATrace #defines. </li>
</ul>
Changes
<ul>
  <li>Simplified the .build file system for this package. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.05.00</span><span style="font-weight: bold;"> </span><span style="font-weight: bold;"> </span>(Dec 5, 2006)<br>
    <br>
Additions</p>
<ul>
  <li>Added some additional system information reporting in ReportWriter::WriteSystemInfo.</li>
  <li>Added Mac OSX compatability. At this point, compatibility merely means that the code will compile and link. It doesn't actually catch OSX system exceptions. Such a thing would require use of Objective C or wrapper code for Objective C. </li>
</ul>
Bug Fixes
<ul>
  <li>Fixed the PS3 version of WriteMemoryView to correctly use pages and page boundaries. This fix was implemented by Phillip Kavan.</li>
  <li>Fixed string bug in ReportWriter::WriteModuleList. This fix was implemented by Alec Miller. </li>
</ul>
Changes
<ul>
  <li>&lt;none&gt;</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.04.00 </span><span style="font-weight: bold;"> </span>(Nov 14, 2006)<br>
    <br>
  Release Notes</p>
<ul>
  <li>This release primarily adds PS3 exception handling support. The PS3's exception handling isn't quite as flexible as that found on Microsoft platforms, so please read the notes in the PS3 exception handler header. </li>
</ul>
<p>Additions </p>
<ul>
  <li>Added PS3 exception handling support.</li>
  <li>Added VS2005 support. </li>
</ul>
Bug Fixes
<ul>
  <li>&lt;none&gt;</li>
</ul>
Changes
<ul>
  <li>The ReportWriter now uses four digit years by default in its reports instead of two. </li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.03.00 </span><span style="font-weight: bold;"> </span>(Nov 1, 2006)<br>
    <br>
  Release Notes</p>
<ul>
  <li>PS3 exception handling support is not yet present, though the skeleton code for it is present. The next release will have PS3 support. </li>
</ul>
<p>Additions </p>
<ul>
  <li>Exposed the ExceptionHandler callstack context (GetExceptionContext) so that a user can externally see the callstack associated with the exception.</li>
  <li>Added the EnableReportTypes function. </li>
  <li>Added a unit test demonstrating how the user can write their own callstack display mechanism.</li>
</ul>
Bug Fixes
<ul>
  <li>Fixed the scripts/initialize.xml file to spell ExceptionHandler as intended. </li>
  <li>Fix a bug whereby EnableReportFields doesn't take effect and instead always tries to report all fields.</li>
  <li>Fix a bug whereby the minidump generation on Microsoft platforms can't be disabled.</li>
  <li>Fixed a bug whereby two successive exception catches could crash if you didn't have a ReportWriter set.</li>
</ul>
Changes
<ul>
  <li>&lt;none&gt;</li>
</ul>
<hr style="width: 100%; height: 2px;">
<span style="font-weight: bold;"></span>
<p><span style="font-weight: bold;">Version 1.02.00 </span><span style="font-weight: bold;"> </span>(Oct 24, 2006)<br>
  <br>
  Release Notes</p>
<ul>
  <li>This version represents the first formally published version of this package.</li>
</ul>
<p>Additions </p>
<ul>
    <li>Added Framework 2 / EAConfig / NAnt build files to this package.</li>
    <li>Added ability to switch between the lightweight EAAssert package and the heavier EATrace package.</li>
    <li>Added this Changes.html document. </li>
</ul>
Bug Fixes 
<ul>
    <li>&lt;none&gt;</li>
</ul>
Changes 
<ul>
    <li>&lt;none&gt;</li>
</ul>
<hr style="width: 100%; height: 2px;">
<p><span style="font-weight: bold;">Earlier versions</span><br>

  <br>

Version 1.02.00 (above) is the first version of this package which contained this document. A list of previous changes is not available and is not likely worthwhile, as 1.02.00 is the version published as a formal package. This package has existed for some time before this publishing, however. <br>

</p>
<hr style="width: 100%; height: 2px;">
End of document<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

</body>
</html>
