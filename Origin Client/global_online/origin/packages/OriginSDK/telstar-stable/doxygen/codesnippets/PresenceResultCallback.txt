// This is called in response to a OriginQueryPresence call.
OriginErrorT PresenceResultCallback(void *pContext, OriginHandleT hHandle, uint32_t total, uint32_t available, OriginErrorT err)
{
   uint32_t read = 0;
   if (err == ORIGIN_SUCCESS)
   {
       if(available && available == total)
       {
           OriginFriendT * friends = new OriginFriendT[total];

           err = OriginReadEnumeration(hHandle, friends, sizeof(OriginFriendT) * total, 0, total, &read);

           if ((err == ORIGIN_SUCCESS) && (read))
           {
               for (uint32_t i=0; i< read; i++) printf("UserId: %I64d State: %S", friends[i].UserId, friends[i].FriendState);
           }
       }
   }
   OriginDestroyHandle(hHandle);
   return err;
}