<project>
    <!-- ************************* -->
    <!-- EAConfig target overrides -->
    <!-- ************************* -->
    <optionset name="config.targetoverrides" >
        <option name="build" value="exclude"/>
        <option name="clean" value="exclude"/>
    </optionset>

    <!-- ******************* -->
    <!-- Package declaration -->
    <!-- ******************* -->

		<property name="grunt_component_packager_path" value="${tools.dir}/npm/origin-grunt-component-packager"/>
		<property name="grunt_component_packager_dev_tools_path" value="${tools.dir}/npm/origin-grunt-component-packager-dev-tools"/>
        <property name="grunt_template_compiler_path" value="${tools.dir}/npm/origin-grunt-template-compiler"/>
        <property name="origin_locale_path" value="${tools.dir}/bower/origin-locale"/>

		<target name="build-component-packager-dev-tools">
			<task name="npm-install-grunt" unless="${islinux}"/>
			<task name="npm-install-grunt-cli" unless="${islinux}" />
			<task name="npm-install-bower" unless="${islinux}"/>
			<echo message="Building origin-grunt-component-packager-dev-tools"/>
			<task name="origin.exec" cmd="${npm.cmd}" args="${npm.options} install" workingdir="${grunt_component_packager_dev_tools_path}"/>
			<task name="origin.exec" cmd="${npm.cmd}" args="link" workingdir="${grunt_component_packager_dev_tools_path}" sudo="false"/>
		</target>

		<target name="build-component-packager">
			<task name="npm-install-grunt" unless="${islinux}"/>
			<task name="npm-install-grunt-cli" unless="${islinux}" />
			<task name="npm-install-bower" unless="${islinux}"/>
			<echo message="Building origin-grunt-component-packager"/>
			<task name="origin.exec" cmd="${npm.cmd}" args="${npm.options} install" workingdir="${grunt_component_packager_path}"/>
			<task name="origin.exec" cmd="${npm.cmd}" args="link" workingdir="${grunt_component_packager_path}" sudo="false"/>
		</target>

        <target name="build-template-compiler">
            <task name="npm-install-grunt" unless="${islinux}"/>
            <task name="npm-install-grunt-cli" unless="${islinux}" />
            <task name="npm-install-bower" unless="${islinux}"/>
            <echo message="Building origin-grunt-template-compiler"/>
            <task name="origin.exec" cmd="${npm.cmd}" args="${npm.options} install" workingdir="${grunt_template_compiler_path}"/>
            <task name="origin.exec" cmd="${npm.cmd}" args="link" workingdir="${grunt_template_compiler_path}" sudo="false"/>
        </target>

        <target name="build-origin-locale">
            <task name="npm-install-grunt" unless="${islinux}"/>
            <task name="npm-install-grunt-cli" unless="${islinux}" />
            <task name="npm-install-bower" unless="${islinux}"/>
            <echo message="Building origin-locale"/>
            <task name="origin.exec" cmd="${npm.cmd}" args="${npm.options} install" workingdir="${origin_locale_path}"/>
            <task name="origin.exec" cmd="${bower.cmd}" args="${bower.options} install" workingdir="${origin_locale_path}"/>
            <task name="origin.exec" cmd="${grunt.cmd}" workingdir="${origin_locale_path}"/>
            <task name="origin.exec" cmd="${bower.cmd}" args="link" workingdir="${origin_locale_path}" sudo="false"/>
        </target>

		<target name="components-test">
			<task name="npm-install-grunt" unless="${islinux}"/>
			<task name="npm-install-grunt-cli" unless="${islinux}" />
			<task name="npm-install-bower" unless="${islinux}"/>
			<echo message="Running unit tests"/>
			<task name="origin.exec" cmd="${grunt.cmd}" args="test" workingdir="${components.dir}" force="${force}"/>
		</target>
</project>




