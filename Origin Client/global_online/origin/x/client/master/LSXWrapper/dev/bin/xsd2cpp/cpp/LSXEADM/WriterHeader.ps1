$SchemaFilename = $Generator.NamespaceToFilename($Schema.Namespace).Replace('/','.')
#The first object in the script is the file it will be saved into.
$SchemaFilename + "Writer.h"
$HeaderGuard = "__" + ($Generator.NamespaceToFilename($Schema.Namespace) + "_Writer.h").Replace('.','_').Replace('/','_').ToUpper() + "__"

"#ifndef " + $HeaderGuard
"#define " + $HeaderGuard

"
// Generated By: XSD2CPP V2.0
// Author: Hans van Veenendaal
//
// !!!! This file is automatically generated please do not modify !!!!
"
"#include ""NodeDocument.h"""
"#include """ + $SchemaFilename + ".h"""
""

#Write out the namespace
$NamespaceParts = $SchemaFilename.Split('.')
foreach($i in $NamespaceParts)
{
	"namespace " + $i
	"{"
}


""
"// Writers used to write the content of a complex type"
foreach($i in $Schema.ComplexTypes)
{
	if(-not $i.IsArrayContainer)
	{
		"bool Write(INodeDocument * pDoc, " + $Generator.ConvertType($i) + " &data);"
	}
}
""
"// Writers used to write the content of an array of a complex type"
foreach($i in $Schema.ComplexTypes)
{
	if($i.IsArrayContainer)
	{
		"bool Write(INodeDocument * pDoc, const char *name, " + $Generator.ConvertType($i) + " &data);"
	}
}

""
[array]::Reverse($NamespaceParts)
foreach($i in $NamespaceParts)							
{
	"} // namespace " + $i
	}

"
#endif // " + $HeaderGuard